"use strict";(self.webpackChunkVMPORTAL=self.webpackChunkVMPORTAL||[]).push([[714],{3714:(Si,M,d)=>{d.r(M),d.d(M,{DynamicObjectModule:()=>Ti});var b=d(9808),B=d(1008),y=d(8555),lt=d(8364),k=d(8479),ct=d(6916),A=d(8235),ut=d(3438),t=d(5e3),U=d(520),T=d(5174);let O=(()=>{class a{constructor(e){this._client=e}getDynamicObjectAppRecords(e){var i=new U.WM({"Content-Type":"application/json"});return this._client.get("api/dynamicobjects/"+e+"/getAll",{headers:i})}deleteDynamicObjectAppRecord(e,i){var n=new U.WM({"Content-Type":"application/json"});return this._client.post("api/dynamicobjects/"+e+"/delete",i,{headers:n})}getDynamicObjectAppAttributes(e){var i=new U.WM({"Content-Type":"application/json"});return this._client.get("api/dynamicobjects/"+e+"/attributes",{headers:i})}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(T.l))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var w=d(287),S=d(7440),dt=d(9805),j=d(4680),D=d(8341),q=d(6563),z=d(4818);function pt(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"angular-slickgrid",4),t.NdJ("onAngularGridCreated",function(n){return t.CHM(e),t.oxw().angularGridReady(n.detail)})("onGridStateChanged",function(n){return t.CHM(e),t.oxw().gridStateChanged(n.detail)})("onBeforeGridDestroy",function(){return t.CHM(e),t.oxw().saveCurrentGridState()}),t._uU(1,"\n    "),t.qZA()}if(2&a){const e=t.oxw();t.Q6J("columnDefinitions",e.columnDef)("gridOptions",e.dynamicobjectappGridOptions)("dataset",e.dynamicobjectappDataSet)}}function mt(a,s){1&a&&(t.TgZ(0,"div",5),t._uU(1,"\n\n        "),t.TgZ(2,"div",6),t._uU(3,"\n\n            Loading...\n\n\n        "),t.qZA(),t._uU(4,"\n\n    "),t.qZA())}function _t(a,s){1&a&&(t.TgZ(0,"div"),t._uU(1,"Data load failed please contact system administrator."),t.qZA())}let ht=(()=>{class a{constructor(e,i,n,r,l,p,m,f,o,v){this.route=e,this.router=i,this.dynamicobjectappServie=n,this.auth=r,this.spinner=l,this._props=p,this.userService=m,this.dialog=f,this._client=o,this.commonService=v,this.columnDef=[],this.isLoaded=!1,this.isDataloadFailed=!1,this.editQueue=[],this.editedItems={},this.isGridEditable=!0,this.isCompositeDisabled=!1,this.isMassSelectionDisabled=!0,this.isGroupByChildAdded=!1,this.properties={},this.userList=[],this.excelExportService=new lt.U,this.isDeviceMobilReset=!1,this.defaultPageSizeList=[],this.LOCAL_STORAGE_KEY="dynamicobjectappGridState",this.DEFAULT_PAGE_SIZE=25,this.listsScope={},this.isGoingToReset=!1,this.spinner.setSpinnerState(!0),this.app=this.route.snapshot.params.app,this.LOCAL_STORAGE_KEY+="_"+this.app;var _=this.dynamicobjectappServie.getDynamicObjectAppRecords(this.app),u=this.dynamicobjectappServie.getDynamicObjectAppAttributes(this.app);const h=JSON.parse(localStorage[this.LOCAL_STORAGE_KEY]||null);var g=[];u.then(C=>{if(this.spinner.setSpinnerState(!1),(C=JSON.parse(C)).status){for(var H in this.attributeList=C.data,this.attributeList)if(this.attributeList[H].type.value.toString().includes("list")){var ot=this.attributeList[H].type.value.toString().split(":");g.push(this.commonService.getListItems(ot[ot.length-1],H).then(x=>{null!=x.res&&0!=x.res.length?(this.listsScope[this.attributeList[x.item].name.value]=x.res,console.log("Lists loaded for application : ",this.listsScope)):this.openDialog(this.attributeList[x.item].required?{type:"alert",message:"List load failed for a mandatory field: "+this.attributeList[x.item].alias.value+".You may face issue while adding new record,please contact system administrator."}:{type:"warn",message:"List load failed for field: "+this.attributeList[x.item].alias.value+"."},null)}).catch(x=>{console.log(x),this.openDialog(this.attributeList[x.item].required?{type:"alert",message:"List load failed for a mandatory field: "+this.attributeList[x.item].alias.value+".You may face issue while adding new record,please contact system administrator."}:{type:"warn",message:"List load failed for field: "+this.attributeList[x.item].alias.value+"."},null)}))}Promise.all(g).then(x=>{console.log("Promise all ",x),this.initDataLoad(_,h)}).catch(x=>{console.log(x)})}else this.openDialog({type:"alert",message:C.message},null),this.isLoaded=!1,this.isDataloadFailed=!0}).catch(C=>{this.spinner.setSpinnerState(!1),this.isLoaded=!1}),this.loggedUser=r.getUser()}initDataLoad(e,i){this._props.getProps().then(n=>{this.properties=JSON.parse(""+n);var r=this.properties.paginationPageSizesList.split(":");try{for(var l in r)this.defaultPageSizeList.push(parseInt(r[l]))}catch(p){console.log(p)}e.then(p=>{this.spinner.setSpinnerState(!1),(p=JSON.parse(p)).status?(this.dynamicobjectappDataSet=this.parseObjectRecords(p.data),this.isLoaded=!0,this.defineGrid(i)):(this.openDialog({type:"alert",message:p.message},null),this.isLoaded=!1,this.isDataloadFailed=!0)}).catch(p=>{this.spinner.setSpinnerState(!1),this.isLoaded=!1})})}parseObjectRecords(e){var i=[],n=1;for(var r in e){var l=e[r];l.id=n,i.push(l),n++}return i}encodeRow(e){for(var i in console.log("encodeRow :: ",e),e)console.log("encodeRow :: row :: key :: before",i,e[i]),e[i]=this.encodeHTML(e[i]),console.log("encodeRow :: row :: key ::",i,e[i]);return e}encodeHTML(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;"):e}angularGridReady(e){this.angularGrid=e,this.gridObj=e.slickGrid,this.dataviewObj=e.dataView,this.gridService=e.gridService,this.angularGrid.resizerService.resizeGrid(100)}ngOnDestroy(){}ngOnInit(){}renderUnsavedStylingOnAllVisibleCells(){for(const e of this.editQueue)if(e){const{item:i,columns:n,editCommand:r}=e;Array.isArray(n)&&n.forEach(l=>{this.renderUnsavedCellStyling(i,l,r)})}}renderUnsavedCellStyling(e,i,n){if(n&&e&&i){const r=this.angularGrid.dataView.getRowByItem(e);r>=0&&this.angularGrid.slickGrid.setCellCssStyles(`unsaved_highlight_${[i.id]}${r}`,{[r]:{[i.id]:"unsaved-editable-field"}})}}checkIsIncludes(e,i){for(var n in e)if(e[n]==i)return!0;return!1}addRecord(){this.router.navigate(["add"],{relativeTo:this.route,state:{attributes:this.attributeList}})}viewCharts(){this.router.navigate(["charts"],{relativeTo:this.route,state:{attributes:this.attributeList,recordData:this.dynamicobjectappDataSet}})}openDialog(e,i){this.dialog.open(A.h,{data:e,panelClass:"app-dialog-class"}).afterClosed().toPromise().then(n=>{"function"==typeof i&&i(n)})}openDialogInput(e,i){this.dialog.open(ct.k,{data:e,panelClass:"app-dialog-class",width:"500px"}).afterClosed().toPromise().then(n=>{"function"==typeof i&&""!=n&&null!=n&&i(n)})}clearGridStateFromLocalStorage(){localStorage[this.LOCAL_STORAGE_KEY]=null,this.isGoingToReset=!0,this.angularGrid.gridService.resetGrid(this.columnDef),window.location.reload(),this.angularGrid.paginationService.changeItemPerPage(this.DEFAULT_PAGE_SIZE)}saveCurrentGridState(){if(!this.isGoingToReset){const e=this.angularGrid.gridStateService.getCurrentGridState();localStorage[this.LOCAL_STORAGE_KEY]=JSON.stringify(e)}}defineGrid(e){this.spinner.setSpinnerState(!0);const i=(v,_,u,h)=>(void 0===u&&(u=""),{text:`<div style='text-align:center;width:auto;color:#000;' ><span style='text-align:center'>${u}</span></div>`,toolTip:u});var l=(v,_)=>{var u="";for(var h in this.listsScope[v]){var g=this.listsScope[v][h];if(g.value.toString()==_.toString()){u=void 0===g.template?g.text:g.template;break}}return u};const p=(v,_,u,h)=>((void 0===u||null==u)&&(u=""),{text:`<div style='text-align:center;width:auto;color:#000;' ><span style='text-align:center'>${u=""!=l(h.field,u)?l(h.field,u):u}</span></div>`,toolTip:u});for(var m in this.columnDef=[],this.attributeList){var f=i;this.attributeList[m].type.value.toString().includes("list")&&(f=p),this.columnDef.push("richtext"==this.attributeList[m].type.value?{id:this.attributeList[m].name.value,name:this.attributeList[m].alias.value,field:this.attributeList[m].name.value,sortable:!0,filterable:!0,formatter:f,filter:{model:k.x$p.compoundInputText},headerCssClass:"gridRow",customTooltip:{hideArrow:!0,headerFormatter:this.headerFormatter.bind(this),formatter:this.tooltipFormatter.bind(this)}}:"autokey"==this.attributeList[m].type.value?{id:this.attributeList[m].name.value,name:this.attributeList[m].alias.value,field:this.attributeList[m].name.value,sortable:!0,formatter:f,headerCssClass:"gridRow",customTooltip:{hideArrow:!0,headerFormatter:this.headerFormatter.bind(this)}}:{id:this.attributeList[m].name.value,name:this.attributeList[m].alias.value,field:this.attributeList[m].name.value,sortable:!0,filterable:!0,formatter:f,filter:{model:k.x$p.compoundInputText},headerCssClass:"gridRow",customTooltip:{hideArrow:!0,headerFormatter:this.headerFormatter.bind(this)}})}var o=[{command:"view",title:"Open ",iconCssClass:"fa fa-hand-pointer-o",positionOrder:66,action:(v,_)=>this.router.navigate(["view"],{relativeTo:this.route,state:{recordData:_.dataContext}})},{command:"edit",title:"Edit ",iconCssClass:"fa fa-pencil",positionOrder:66,action:(v,_)=>this.router.navigate(["edit"],{relativeTo:this.route,state:{recordData:_.dataContext}})},{command:"deleteRecord",title:"Remove",iconCssClass:"fa fa-times color-danger",cssClass:"red",textCssClass:"text-italic color-danger-light",itemVisibilityOverride:v=>!0,action:(v,_)=>{const h=_.dataContext;confirm(`Do you really want to remove this record  "${JSON.stringify(h)}"?`)&&(this.spinner.setSpinnerState(!0),this.dynamicobjectappServie.deleteDynamicObjectAppRecord(this.app,h).then(C=>{C=JSON.parse(C),this.spinner.setSpinnerState(!1),"Success"==C.status?(this.angularGrid.gridService.deleteItemById(h.id),this.openDialog({type:"message",message:"Record removed successfully"},null)):this.openDialog({type:"alert",message:C.message},null)}).catch(C=>{this.spinner.setSpinnerState(!1),this.openDialog({type:"alert",message:C.message},null)}))}}];this.columnDef.push({id:"action",name:"Action",field:"action",width:70,minWidth:70,maxWidth:70,excludeFromExport:!0,excludeFromHeaderMenu:!0,formatter:()=>'<div class="button-style margin-auto" style="width: 35px;"><span class="fa fa-chevron-down text-primary"></span></div>',cellMenu:{hideCloseButton:!1,width:175,commandItems:o}}),this.dynamicobjectappGridOptions={gridHeight:"95%",autoResize:{container:"#dynamicobject-app-grid-container",applyResizeToContainer:!0,rightPadding:0},contextMenu:{hideClearAllGrouping:!0,commandItems:o},enableSorting:!0,enableAutoResize:!0,enableFiltering:!0,enablePagination:!0,pagination:{pageSizes:this.defaultPageSizeList?this.defaultPageSizeList:[5,10,20,25,50],pageSize:25},enableExcelCopyBuffer:!0,enableExcelExport:!0,exportOptions:{exportWithFormatter:!0,sanitizeDataExport:!0},registerExternalResources:[new ut.E,this.excelExportService],customTooltip:{hideArrow:!0,headerFormatter:this.headerFormatter.bind(this)},autoTooltipOptions:{enableForHeaderCells:!0},enableCheckboxSelector:!1,enableRowSelection:!1,multiSelect:!1,enableCellMenu:!0,gridMenu:{hideExportExcelCommand:!0,menuUsabilityOverride:v=>!0,iconCssClass:"fa fa-bars",hideForceFitButton:!1,hideSyncResizeButton:!1,hideToggleFilterCommand:!0,menuWidth:17,resizeOnShowHeaderRow:!0,commandItems:[{iconCssClass:"fa fa-plus-circle activated",title:"Add Record",disabled:!1,command:"addRecord",textCssClass:"title",positionOrder:1},{iconCssClass:"fa fa-pie-chart activated",title:"Charts",disabled:!1,command:"viewCharts",textCssClass:"title",positionOrder:1},{iconCssClass:"slick-gridmenu-icon fa fa-file-excel-o text-success",title:"Export to Excel",disabled:!1,command:"exportExcel",textCssClass:"title",positionOrder:1},{iconCssClass:"fa fa-times text-danger",title:"Reset Grid",disabled:!1,command:"resetGrid",textCssClass:"title",positionOrder:90}],onCommand:(v,_)=>{"resetGrid"===_.command?this.clearGridStateFromLocalStorage():"addRecord"===_.command?this.addRecord():"viewCharts"===_.command?this.viewCharts():"exportExcel"===_.command&&this.excelExportService.exportToExcel({filename:this.app+"_"+(new Date).toTimeString().replace(" ","_"),format:k.Tv5.xlsx})},onColumnsChanged:(v,_)=>{}},enableGrouping:!0,enableAutoTooltip:!0},e&&(this.dynamicobjectappGridOptions.presets=e),this.spinner.setSpinnerState(!1)}gridStateChanged(e){if(!this.isDeviceMobilReset&&!this.isGoingToReset){const i=this.angularGrid.gridStateService.getCurrentGridState();localStorage[this.LOCAL_STORAGE_KEY]=JSON.stringify(i)}}tooltipFormatter(e,i,n,r,l,p){return console.log("Inside ToolTipFormatter :: "),void 0!==l[r.id]?`<div style='max-height:500px;max-width:500px;height:auto;width:auto;overflow:auto;'><p>${l[r.id]}</p></div>\n        `:""}headerFormatter(e,i,n,r,l,p){return""}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(y.gz),t.Y36(y.F0),t.Y36(O),t.Y36(w.q),t.Y36(S.V),t.Y36(dt.U),t.Y36(j.K),t.Y36(D.uw),t.Y36(T.l),t.Y36(q.v))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-dynamicobject-app-home"]],decls:8,vars:3,consts:[["id","dynamicobject-app-grid-container"],["gridId","grid2",3,"columnDefinitions","gridOptions","dataset","onAngularGridCreated","onGridStateChanged","onBeforeGridDestroy",4,"ngIf"],["class","h-100 w-100 d-table",4,"ngIf"],[4,"ngIf"],["gridId","grid2",3,"columnDefinitions","gridOptions","dataset","onAngularGridCreated","onGridStateChanged","onBeforeGridDestroy"],[1,"h-100","w-100","d-table"],[1,"h-100","w-100","align-middle","d-table-cell","display-4","text-primary","text-center"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._uU(1,"\n\n    "),t.YNc(2,pt,2,3,"angular-slickgrid",1),t._uU(3,"\n    "),t.YNc(4,mt,5,0,"div",2),t._uU(5,"\n    "),t.YNc(6,_t,2,0,"div",3),t._uU(7,"\n"),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",i.isLoaded),t.xp6(2),t.Q6J("ngIf",!i.isLoaded&&!i.isDataloadFailed),t.xp6(2),t.Q6J("ngIf",!i.isLoaded&&i.isDataloadFailed))},directives:[b.O5,z.PW8],styles:[".fa-check-circle[_ngcontent-%COMP%]{color:#5cb85c}.fa-times-circle[_ngcontent-%COMP%]{color:#f90000}"]}),a})();var c=d(3075),F=d(2232),N=d(2305),R=d(7160),J=d(3176),P=d(4537),W=d(9273),G=d(1377);const Z=function(a){return{"is-invalid":a}};function ft(a,s){if(1&a&&t._UZ(0,"input",24),2&a){const e=t.oxw(2).index,i=t.oxw();t.s9C("id",i.attributeList[e].alias.value),t.s9C("formControlName",i.attributeList[e].name.value),t.Q6J("ngClass",t.VKq(3,Z,i.submitted&&i.checkIsInvalid(i.attributeList[e].name.value.toString())))}}function gt(a,s){if(1&a&&t._UZ(0,"input",25),2&a){const e=t.oxw(2).index,i=t.oxw();t.s9C("id",i.attributeList[e].alias.value),t.s9C("formControlName",i.attributeList[e].name.value),t.Q6J("ngClass",t.VKq(3,Z,i.submitted&&i.checkIsInvalid(i.attributeList[e].name.value.toString())))}}function vt(a,s){if(1&a&&(t.TgZ(0,"option",28),t._uU(1),t.qZA()),2&a){const e=s.index,i=t.oxw(3).index,n=t.oxw();t.Q6J("ngValue",n.listsScope[n.attributeList[i].name.value][e].value),t.xp6(1),t.Oqu(n.listsScope[n.attributeList[i].name.value][e].text)}}function bt(a,s){if(1&a&&(t.TgZ(0,"select",26),t._uU(1,"\n                                "),t.YNc(2,vt,2,2,"option",27),t._uU(3,"\n                            "),t.qZA()),2&a){const e=t.oxw(2).index,i=t.oxw();t.s9C("id",i.attributeList[e].alias.value),t.s9C("formControlName",i.attributeList[e].name.value),t.Q6J("ngClass",t.VKq(4,Z,i.submitted&&i.checkIsInvalid(i.attributeList[e].name.value.toString()))),t.xp6(2),t.Q6J("ngForOf",i.listsScope[i.attributeList[e].name.value])}}function xt(a,s){1&a&&t._UZ(0,"span",29)}const Q=function(a){return{"is-ngx-invalid is-invalid":a}};function yt(a,s){if(1&a&&(t.TgZ(0,"ng-select",30),t._uU(1,"\n                            "),t.qZA()),2&a){const e=t.oxw(2).index,i=t.oxw();t.s9C("formControlName",i.attributeList[e].name.value),t.Q6J("items",i.usersList)("ngClass",t.VKq(3,Q,i.submitted&&i.checkIsInvalid(i.attributeList[e].name.value.toString())))}}function Ct(a,s){1&a&&t._UZ(0,"span",29)}function Lt(a,s){if(1&a&&(t.TgZ(0,"ng-select",31),t._uU(1,"\n                            "),t.qZA()),2&a){const e=t.oxw(2).index,i=t.oxw();t.s9C("formControlName",i.attributeList[e].name.value),t.Q6J("items",i.teamList)("ngClass",t.VKq(3,Q,i.submitted&&i.checkIsInvalid(i.attributeList[e].name.value.toString())))}}const $=function(){return{height:"200px"}},X=function(a){return{"is-richtext-invalid is-invalid":a}};function At(a,s){if(1&a&&t._UZ(0,"quill-editor",32),2&a){const e=t.oxw(2).index,i=t.oxw();t.s9C("id",i.attributeList[e].name.value),t.s9C("formControlName",i.attributeList[e].name.value),t.Q6J("styles",t.DdM(4,$))("ngClass",t.VKq(5,X,i.submitted&&i.checkIsInvalid(i.attributeList[e].name.value.toString())))}}function Ut(a,s){if(1&a&&(t.TgZ(0,"div",35),t._uU(1),t.qZA()),2&a){const e=t.oxw(3).index,i=t.oxw();t.xp6(1),t.hij("",i.attributeList[e].alias.value," is required")}}function Tt(a,s){1&a&&(t.TgZ(0,"div",35),t._uU(1,"White Space is not allowed."),t.qZA())}function wt(a,s){1&a&&(t.TgZ(0,"div",35),t._uU(1,"Invalid Email !"),t.qZA())}function St(a,s){if(1&a&&(t.TgZ(0,"div",33),t._uU(1,"\n                                "),t.YNc(2,Ut,2,1,"div",34),t._uU(3,"\n                                "),t.YNc(4,Tt,2,0,"div",34),t._uU(5,"\n                                "),t.YNc(6,wt,2,0,"div",34),t._uU(7,"\n                            "),t.qZA()),2&a){const e=t.oxw(2).index,i=t.oxw();t.xp6(2),t.Q6J("ngIf",i.checkIsInvalidRequired(i.attributeList[e].name.value.toString())),t.xp6(2),t.Q6J("ngIf",i.checkIsInvalidWhiteSpace(i.attributeList[e].name.value.toString())),t.xp6(2),t.Q6J("ngIf",i.checkIsInvalidEmail(i.attributeList[e].name.value.toString()))}}const tt=function(a){return{required:a}};function Dt(a,s){if(1&a&&(t.TgZ(0,"div",13),t._uU(1,"\n                        "),t.TgZ(2,"div",14),t._uU(3,"\n                            "),t.TgZ(4,"label",15),t._uU(5),t.qZA(),t._uU(6,"\n                            "),t.YNc(7,ft,1,5,"input",16),t._uU(8,"\n                            "),t.YNc(9,gt,1,5,"input",17),t._uU(10,"\n                            "),t.YNc(11,bt,4,6,"select",18),t._uU(12,"\n                            "),t.YNc(13,xt,1,0,"span",19),t._uU(14,"\n                            "),t.YNc(15,yt,2,5,"ng-select",20),t._uU(16,"\n                            "),t.YNc(17,Ct,1,0,"span",19),t._uU(18,"\n                            "),t.YNc(19,Lt,2,5,"ng-select",21),t._uU(20,"\n                            "),t.YNc(21,At,1,7,"quill-editor",22),t._uU(22,"\n                           \n                            "),t.YNc(23,St,8,3,"div",23),t._uU(24,"\n                        "),t.qZA(),t._uU(25,"\n                    "),t.qZA()),2&a){const e=t.oxw().index,i=t.oxw();t.xp6(2),t.Q6J("ngClass",t.VKq(12,tt,i.checkIfAttributeRequired(e))),t.xp6(2),t.s9C("for",i.attributeList[e].name.value),t.xp6(1),t.hij("",i.attributeList[e].alias.value,":"),t.xp6(2),t.Q6J("ngIf","string"==i.attributeList[e].type.value),t.xp6(2),t.Q6J("ngIf","number"==i.attributeList[e].type.value),t.xp6(2),t.Q6J("ngIf",i.attributeList[e].type.value.toString().includes("list")),t.xp6(2),t.Q6J("ngIf","user"==i.attributeList[e].type.value),t.xp6(2),t.Q6J("ngIf","user"==i.attributeList[e].type.value),t.xp6(2),t.Q6J("ngIf","team"==i.attributeList[e].type.value),t.xp6(2),t.Q6J("ngIf","team"==i.attributeList[e].type.value),t.xp6(2),t.Q6J("ngIf","richtext"==i.attributeList[e].type.value),t.xp6(2),t.Q6J("ngIf",i.submitted&&i.checkIsInvalid(i.attributeList[e].name.value.toString()))}}function Zt(a,s){if(1&a&&t._UZ(0,"input",24),2&a){const e=t.oxw(2).index,i=t.oxw();t.s9C("id",i.attributeList[e+1].alias.value),t.s9C("formControlName",i.attributeList[e+1].name.value),t.Q6J("ngClass",t.VKq(3,Z,i.submitted&&i.checkIsInvalid(i.attributeList[e+1].name.value)))}}function It(a,s){if(1&a&&t._UZ(0,"input",25),2&a){const e=t.oxw(2).index,i=t.oxw();t.s9C("id",i.attributeList[e+1].alias.value),t.s9C("formControlName",i.attributeList[e+1].name.value),t.Q6J("ngClass",t.VKq(3,Z,i.submitted&&i.checkIsInvalid(i.attributeList[e+1].name.value)))}}function Ot(a,s){if(1&a&&(t.TgZ(0,"option",28),t._uU(1),t.qZA()),2&a){const e=s.index,i=t.oxw(3).index,n=t.oxw();t.Q6J("ngValue",n.listsScope[n.attributeList[i+1].name.value][e].value),t.xp6(1),t.Oqu(n.listsScope[n.attributeList[i+1].name.value][e].text)}}function jt(a,s){if(1&a&&(t.TgZ(0,"select",26),t._uU(1,"\n                                "),t.YNc(2,Ot,2,2,"option",27),t._uU(3,"\n                            "),t.qZA()),2&a){const e=t.oxw(2).index,i=t.oxw();t.s9C("id",i.attributeList[e+1].alias.value),t.s9C("formControlName",i.attributeList[e+1].name.value),t.Q6J("ngClass",t.VKq(4,Z,i.submitted&&i.checkIsInvalid(i.attributeList[e+1].name.value))),t.xp6(2),t.Q6J("ngForOf",i.listsScope[i.attributeList[e+1].name.value])}}function qt(a,s){1&a&&t._UZ(0,"span",29)}function Rt(a,s){if(1&a&&(t.TgZ(0,"ng-select",30),t._uU(1,"\n                            "),t.qZA()),2&a){const e=t.oxw(2).index,i=t.oxw();t.s9C("formControlName",i.attributeList[e+1].name.value),t.Q6J("items",i.usersList)("ngClass",t.VKq(3,Q,i.submitted&&i.checkIsInvalid(i.attributeList[e+1].name.value.toString())))}}function Jt(a,s){1&a&&t._UZ(0,"span",29)}function Yt(a,s){if(1&a&&(t.TgZ(0,"ng-select",31),t._uU(1,"\n                            "),t.qZA()),2&a){const e=t.oxw(2).index,i=t.oxw();t.s9C("formControlName",i.attributeList[e+1].name.value),t.Q6J("items",i.teamList)("ngClass",t.VKq(3,Q,i.submitted&&i.checkIsInvalid(i.attributeList[e+1].name.value.toString())))}}function Ft(a,s){if(1&a&&t._UZ(0,"quill-editor",37),2&a){const e=t.oxw(2).index,i=t.oxw();t.s9C("name",i.attributeList[e+1].name.value),t.s9C("id",i.attributeList[e+1].name.value),t.s9C("formControlName",i.attributeList[e+1].name.value),t.Q6J("styles",t.DdM(5,$))("ngClass",t.VKq(6,X,i.submitted&&i.checkIsInvalid(i.attributeList[e+1].name.value.toString())))}}function Nt(a,s){if(1&a&&(t.TgZ(0,"div",35),t._uU(1),t.qZA()),2&a){const e=t.oxw(3).index,i=t.oxw();t.xp6(1),t.hij("",i.attributeList[e+1].alias.value," is required")}}function Qt(a,s){1&a&&(t.TgZ(0,"div"),t._uU(1,"White Space is not allowed."),t.qZA())}function Vt(a,s){1&a&&(t.TgZ(0,"div",35),t._uU(1,"Invalid Email !"),t.qZA())}function Et(a,s){if(1&a&&(t.TgZ(0,"div",33),t._uU(1,"\n                                "),t.YNc(2,Nt,2,1,"div",34),t._uU(3,"\n                                "),t.YNc(4,Qt,2,0,"div",38),t._uU(5,"\n                                "),t.YNc(6,Vt,2,0,"div",34),t._uU(7,"\n                            "),t.qZA()),2&a){const e=t.oxw(2).index,i=t.oxw();t.xp6(2),t.Q6J("ngIf",i.checkIsInvalidRequired(i.attributeList[e+1].name.value)),t.xp6(2),t.Q6J("ngIf",i.checkIsInvalidWhiteSpace(i.attributeList[e+1].name.value)),t.xp6(2),t.Q6J("ngIf",i.checkIsInvalidEmail(i.attributeList[e+1].name.value.toString()))}}function kt(a,s){if(1&a&&(t.TgZ(0,"div",13),t._uU(1,"\n                        "),t.TgZ(2,"div",14),t._uU(3,"\n                            "),t.TgZ(4,"label",15),t._uU(5),t.qZA(),t._uU(6,"\n                            "),t.YNc(7,Zt,1,5,"input",16),t._uU(8,"\n                            "),t.YNc(9,It,1,5,"input",17),t._uU(10,"\n                            "),t.YNc(11,jt,4,6,"select",18),t._uU(12,"\n                            "),t.YNc(13,qt,1,0,"span",19),t._uU(14,"\n                            "),t.YNc(15,Rt,2,5,"ng-select",20),t._uU(16,"\n                            "),t.YNc(17,Jt,1,0,"span",19),t._uU(18,"\n                            "),t.YNc(19,Yt,2,5,"ng-select",21),t._uU(20,"\n                            "),t.YNc(21,Ft,1,8,"quill-editor",36),t._uU(22,"\n                            \n                            "),t.YNc(23,Et,8,3,"div",23),t._uU(24,"\n                        "),t.qZA(),t._uU(25,"\n                    "),t.qZA()),2&a){const e=t.oxw().index,i=t.oxw();t.xp6(2),t.Q6J("ngClass",t.VKq(12,tt,i.checkIfAttributeRequired(e+1))),t.xp6(2),t.s9C("for",i.attributeList[e+1].name.value),t.xp6(1),t.hij("",i.attributeList[e+1].alias.value,":"),t.xp6(2),t.Q6J("ngIf","string"==i.attributeList[e+1].type.value),t.xp6(2),t.Q6J("ngIf","number"==i.attributeList[e+1].type.value),t.xp6(2),t.Q6J("ngIf",i.attributeList[e+1].type.value.toString().includes("list")),t.xp6(2),t.Q6J("ngIf","user"==i.attributeList[e+1].type.value),t.xp6(2),t.Q6J("ngIf","user"==i.attributeList[e+1].type.value),t.xp6(2),t.Q6J("ngIf","team"==i.attributeList[e+1].type.value),t.xp6(2),t.Q6J("ngIf","team"==i.attributeList[e+1].type.value),t.xp6(2),t.Q6J("ngIf","richtext"==i.attributeList[e+1].type.value),t.xp6(2),t.Q6J("ngIf",i.submitted&&i.checkIsInvalid(i.attributeList[e+1].name.value))}}const Pt=function(a){return{hidden:a}};function Gt(a,s){if(1&a&&(t.TgZ(0,"div",11),t._uU(1,"\n                    "),t.YNc(2,Dt,26,14,"div",12),t._uU(3,"\n                    "),t.YNc(4,kt,26,14,"div",12),t._uU(5,"\n                "),t.qZA()),2&a){const e=s.index,i=s.even,n=t.oxw();t.Q6J("ngClass",t.VKq(3,Pt,!i)),t.xp6(2),t.Q6J("ngIf",i),t.xp6(2),t.Q6J("ngIf",i&&e!=n.attributeList.length-1)}}let Kt=(()=>{class a{constructor(e,i,n,r,l,p,m,f,o,v,_,u){this.formBuilder=e,this.route=i,this._client=n,this.dynamicobjectappServie=r,this.dialog=l,this._spinner=p,this.router=m,this.tms=f,this._auth=o,this.toastService=v,this.commonService=_,this.userService=u,this.registerForm=new c.cw({}),this.submitted=!1,this.title="Add Record",this.listsScope={},this.usersList=[],this.teamList=[],this.loggedUser=o.getUser(),f.getTeams().then(h=>{this.teamList=h}).catch(h=>{}),u.getUsers().then(h=>{this.usersList=h}).catch(h=>{})}filterAttributes(e){var i=[];for(var n in e)"autokey"!=e[n].type.value&&i.push(e[n]);return i}ngOnInit(){this.app=this.route.snapshot.params.app,void 0!==history.state.attributes?(this.attributeList=this.filterAttributes(history.state.attributes),this.registerForm=this.formBuilder.group(this.parseAttributesToFormItems())):this.dynamicobjectappServie.getDynamicObjectAppAttributes(this.app).then(i=>{this._spinner.setSpinnerState(!1),(i=JSON.parse(i)).status?(this.attributeList=this.filterAttributes(i.data),this.registerForm=this.formBuilder.group(this.parseAttributesToFormItems())):this.openDialog({type:"alert",message:i.message},()=>{this.router.navigate([".."],{relativeTo:this.route})})}).catch(i=>{this._spinner.setSpinnerState(!1),console.log("error occurred ",i),this.openDialog({type:"alert",message:i.message},()=>{this.router.navigate([".."],{relativeTo:this.route})})})}parseAttributesToFormItems(){var e={};for(var i in this.attributeList){var n=[],r=null!=this.attributeList[i].defaultValue&&this.attributeList[i].defaultValue.toString().length>0?this.attributeList[i].defaultValue.value:"number"==this.attributeList[i].type.value?null:"",l=[];for(var p in this.attributeList[i].validators.value)switch(this.attributeList[i].validators.value[p].element.type.value){case"required":l.push(c.kI.required),this.attributeList[i].required=!0;break;case"whitespace":case"whitspace":l.push(F.w.restrictWhiteSpace);break;case"email":l.push(c.kI.email)}if(this.attributeList[i].type.value.toString().includes("list")){var m=this.attributeList[i].type.value.toString().split(":");this.commonService.getListItems(m[m.length-1],i).then(o=>{null!=o.res&&0!=o.res.length?this.listsScope[this.attributeList[o.item].name.value]=o.res:this.attributeList[o.item].required?this.openDialog({type:"alert",message:"List load failed for a mandatory field. Please contact system administrator."},()=>{this.router.navigate([".."],{relativeTo:this.route})}):this.openDialog({type:"warn",message:"List load failed for field: "+this.attributeList[o.item].alias.value+"."},null)}).catch(o=>{console.log(o),this.attributeList[o.item].required?this.openDialog({type:"alert",message:"List load failed for a mandatory field. Please contact system administrator."},()=>{this.router.navigate([".."],{relativeTo:this.route})}):this.openDialog({type:"warn",message:"List load failed for field: "+this.attributeList[o.item].alias.value+"."},null)})}n.push(r),n.push(l),e[this.attributeList[i].name.value]=n}return e}get f(){return this.registerForm.controls}checkIfAttributeRequired(e){return!!this.attributeList[e].required&&this.attributeList[e].required}checkIsInvalid(e){return!!this.registerForm.controls[e].errors}checkIsInvalidRequired(e){return!!this.registerForm.controls[e].errors&&!!(this.registerForm.controls[e].errors||"").required}checkIsInvalidEmail(e){return!!this.registerForm.controls[e].errors&&!!(this.registerForm.controls[e].errors||"").email}checkIsInvalidWhiteSpace(e){return!!this.registerForm.controls[e].errors&&!!(this.registerForm.controls[e].errors||"").restrictWhiteSpace}checkIsInvalidLength(e){return!!this.registerForm.controls[e].errors&&!!(this.registerForm.controls[e].errors||"").maxlength}getFormCotrolData(e){return this.registerForm.controls[e].value}onSubmit(){if(this.submitted=!0,this._spinner.setSpinnerState(!0),this.registerForm.invalid)this._spinner.setSpinnerState(!1);else{var e=new U.WM({"Content-Type":"application/json"});this._client.post("api/dynamicobjects/"+this.app+"/add",this.registerForm.value,{headers:e}).then(r=>{this._spinner.setSpinnerState(!1),r&&(r=JSON.parse(r)),"SUCCESS"==r.status||r.status?this.loggedUser.useToast?(this.toastService.showSuccess(r.message,5e3),this.router.navigate(["../"],{relativeTo:this.route})):this.openDialog({type:"message",message:r.message},()=>{this.router.navigate(["../"],{relativeTo:this.route})}):(this._spinner.setSpinnerState(!1),this.openDialog({type:"alert",message:r.message},null))}).catch(r=>{this._spinner.setSpinnerState(!1),this.openDialog({type:"alert",message:r.message},null)})}}openDialog(e,i){this.dialog.open(A.h,{data:e,panelClass:"app-dialog-class"}).afterClosed().toPromise().then(n=>{"function"==typeof i&&i()})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(c.qu),t.Y36(y.gz),t.Y36(T.l),t.Y36(O),t.Y36(D.uw),t.Y36(S.V),t.Y36(y.F0),t.Y36(N.U),t.Y36(w.q),t.Y36(R.k),t.Y36(q.v),t.Y36(j.K))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-dynamicobjectapp-add-record"]],decls:39,vars:3,consts:[[1,"container-fluid-lg","p-3","my-3"],[1,"row"],[1,"col-xs-6"],[1,"page-title","ml-3"],["area-label","false",1,"fa","fa-th"],[3,"formGroup","ngSubmit"],[1,"row","ml-4"],[1,"col-lg-12"],["class","row p-0 ",3,"ngClass",4,"ngFor","ngForOf"],[1,"col"],["type","submit","mat-button","",1,"btn","float-sm-right","text-capitalize","btn-primary","mui-w-100","mui-text-bold"],[1,"row","p-0",3,"ngClass"],["class","col-sm-6",4,"ngIf"],[1,"col-sm-6"],[1,"form-group",3,"ngClass"],[3,"for"],["type","text","class","form-control ",3,"id","formControlName","ngClass",4,"ngIf"],["type","number","class","form-control ",3,"id","formControlName","ngClass",4,"ngIf"],["class","form-control ",3,"id","formControlName","ngClass",4,"ngIf"],["class","fa fa-users form-control-prefix-icon text-muted form-control","style","padding:0 !important;","area-label","false","area-label","false",4,"ngIf"],["class","form-control-include-icon","bindLabel","user_name","placeholder","Select User","bindValue","user_id","ngDefaultControl","",3,"items","formControlName","ngClass",4,"ngIf"],["class","form-control-include-icon","bindLabel","team_desc","placeholder","Select Team","bindValue","team_name","ngDefaultControl","",3,"items","formControlName","ngClass",4,"ngIf"],["name","technote","ngDefaultControl","",3,"styles","id","formControlName","ngClass",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["type","text",1,"form-control",3,"id","formControlName","ngClass"],["type","number",1,"form-control",3,"id","formControlName","ngClass"],[1,"form-control",3,"id","formControlName","ngClass"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["area-label","false","area-label","false",1,"fa","fa-users","form-control-prefix-icon","text-muted","form-control",2,"padding","0 !important"],["bindLabel","user_name","placeholder","Select User","bindValue","user_id","ngDefaultControl","",1,"form-control-include-icon",3,"items","formControlName","ngClass"],["bindLabel","team_desc","placeholder","Select Team","bindValue","team_name","ngDefaultControl","",1,"form-control-include-icon",3,"items","formControlName","ngClass"],["name","technote","ngDefaultControl","",3,"styles","id","formControlName","ngClass"],[1,"invalid-feedback"],["class","ml-1",4,"ngIf"],[1,"ml-1"],["ngDefaultControl","",3,"styles","name","id","formControlName","ngClass",4,"ngIf"],["ngDefaultControl","",3,"styles","name","id","formControlName","ngClass"],[4,"ngIf"]],template:function(e,i){1&e&&(t._uU(0,"\n"),t._uU(1,"\n"),t._UZ(2,"app-path"),t._uU(3,"\n\n"),t.TgZ(4,"div",0),t._uU(5,"\n    "),t.TgZ(6,"div",1),t._uU(7,"\n        "),t.TgZ(8,"div",2),t._uU(9,"\n            "),t.TgZ(10,"h3",3),t._uU(11,"\n                "),t._UZ(12,"i",4),t._uU(13),t._UZ(14,"hr"),t._uU(15,"\n            "),t.qZA(),t._uU(16,"\n        "),t.qZA(),t._uU(17,"\n    "),t.qZA(),t._uU(18,"\n    "),t.TgZ(19,"form",5),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t._uU(20,"\n        "),t.TgZ(21,"div",6),t._uU(22,"\n            "),t.TgZ(23,"div",7),t._uU(24,"\n                "),t.YNc(25,Gt,6,5,"div",8),t._uU(26,"\n            "),t.qZA(),t._uU(27,"\n        "),t.qZA(),t._uU(28,"\n        "),t.TgZ(29,"div",6),t._uU(30,"\n            "),t.TgZ(31,"div",9),t._uU(32,"\n                "),t.TgZ(33,"button",10),t._uU(34,"Submit"),t.qZA(),t._uU(35,"\n            "),t.qZA(),t._uU(36,"\n        "),t.qZA(),t._uU(37,"\n    "),t.qZA(),t._uU(38,"\n\n\n\n"),t.qZA()),2&e&&(t.xp6(13),t.hij(" ",i.title,"\n                "),t.xp6(6),t.Q6J("formGroup",i.registerForm),t.xp6(6),t.Q6J("ngForOf",i.attributeList))},directives:[J.l,c._Y,c.JL,c.sg,b.sg,b.mk,b.O5,c.Fj,c.JJ,c.u,c.wV,c.EJ,c.YN,c.Kr,P.w9,W.g6,G.lW],styles:[""]}),a})();var et=d(2313),Ht=d(3265),Mt=d(9722),Bt=d(6201),it=d(9013),zt=d(6156),L=d(3724);function Wt(a,s){if(1&a&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.s9C("value",e.name.value),t.xp6(1),t.Oqu(e.alias.value)}}function $t(a,s){1&a&&(t.TgZ(0,"div",24),t._uU(1,"Field is required"),t.qZA())}function Xt(a,s){if(1&a&&(t.TgZ(0,"div",22),t._uU(1,"\n                            "),t.YNc(2,$t,2,0,"div",23),t._uU(3,"\n                        "),t.qZA()),2&a){const e=t.oxw(2);t.xp6(2),t.Q6J("ngIf",e.f.field.errors.required)}}function te(a,s){1&a&&(t.TgZ(0,"div",24),t._uU(1,"Height is required"),t.qZA())}function ee(a,s){if(1&a&&(t.TgZ(0,"div",22),t._uU(1,"\n                            "),t.YNc(2,te,2,0,"div",23),t._uU(3,"\n                        "),t.qZA()),2&a){const e=t.oxw(2);t.xp6(2),t.Q6J("ngIf",e.f.height.errors.required)}}const V=function(a){return{activated:a}};function ie(a,s){if(1&a&&t._UZ(0,"i",29),2&a){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("matTooltip",e)("ngClass",t.VKq(2,V,i.f.chartType.value==e))}}function ae(a,s){if(1&a&&t._UZ(0,"i",30),2&a){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("ngClass",t.VKq(2,V,i.f.chartType.value==e))("matTooltip",e)}}function ne(a,s){if(1&a&&t._UZ(0,"i",31),2&a){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("ngClass",t.VKq(2,V,i.f.chartType.value==e))("matTooltip",e)}}function se(a,s){if(1&a&&t._UZ(0,"i",32),2&a){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("ngClass",t.VKq(2,V,i.f.chartType.value==e))("matTooltip",e)}}function re(a,s){if(1&a&&(t.TgZ(0,"mat-button-toggle",21),t.YNc(1,ie,1,4,"i",25),t._uU(2,"\n                                "),t.YNc(3,ae,1,4,"i",26),t._uU(4,"\n                                "),t.YNc(5,ne,1,4,"i",27),t._uU(6,"\n                                "),t.YNc(7,se,1,4,"i",28),t._uU(8,"\n                            "),t.qZA()),2&a){const e=s.$implicit;t.s9C("value",e),t.xp6(1),t.Q6J("ngIf","PIE CHART"==e),t.xp6(2),t.Q6J("ngIf","BAR VERTICAL"==e),t.xp6(2),t.Q6J("ngIf","BAR HORIZONTAL"==e),t.xp6(2),t.Q6J("ngIf","ADVANCED"==e)}}const Y=function(a){return{"height.px":a}};function oe(a,s){if(1&a&&(t.TgZ(0,"div",33),t._uU(1,"\n        "),t.TgZ(2,"ngx-charts-pie-grid",34),t._uU(3,"\n        "),t.qZA(),t._uU(4,"\n    "),t.qZA()),2&a){const e=t.oxw(2);t.Q6J("ngStyle",t.VKq(2,Y,e.cardHeight)),t.xp6(2),t.Q6J("results",e.resultSet)}}function le(a,s){if(1&a&&(t.TgZ(0,"div",35),t._uU(1,"\n        "),t.TgZ(2,"ngx-charts-bar-horizontal",36),t._uU(3,"\n        "),t.qZA(),t._uU(4,"\n    "),t.qZA()),2&a){const e=t.oxw(2);t.Q6J("ngStyle",t.VKq(9,Y,e.cardHeight)),t.xp6(2),t.Q6J("results",e.resultSet)("xAxis",e.showXAxis)("yAxis",e.showYAxis)("legend",!1)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel","Count")("yAxisLabel",e.f.field.value)}}function ce(a,s){if(1&a&&(t.TgZ(0,"div",35),t._uU(1,"\n        "),t.TgZ(2,"ngx-charts-bar-vertical",37),t._uU(3,"\n        "),t.qZA(),t._uU(4,"\n    "),t.qZA()),2&a){const e=t.oxw(2);t.Q6J("ngStyle",t.VKq(9,Y,e.cardHeight)),t.xp6(2),t.Q6J("results",e.resultSet)("xAxis",e.showXAxis)("yAxis",e.showYAxis)("legend",!1)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("yAxisLabel","Count")("xAxisLabel",e.f.field.value)}}function ue(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",35),t._uU(1,"\n        "),t.TgZ(2,"ngx-charts-advanced-pie-chart",38),t.NdJ("select",function(n){return t.CHM(e),t.oxw(2).onSelect(n)})("activate",function(n){return t.CHM(e),t.oxw(2).onActivate(n)})("deactivate",function(n){return t.CHM(e),t.oxw(2).onDeactivate(n)}),t._uU(3,"\n        "),t.qZA(),t._uU(4,"\n    "),t.qZA()}if(2&a){const e=t.oxw(2);t.Q6J("ngStyle",t.VKq(3,Y,e.cardHeight)),t.xp6(2),t.Q6J("results",e.resultSet)("gradient",e.gradient)}}function de(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",35),t._uU(1,"\n        "),t.TgZ(2,"ngx-charts-pie-chart",39),t.NdJ("select",function(n){return t.CHM(e),t.oxw(2).onSelect(n)})("activate",function(n){return t.CHM(e),t.oxw(2).onActivate(n)})("deactivate",function(n){return t.CHM(e),t.oxw(2).onDeactivate(n)}),t._uU(3,"\n        "),t.qZA(),t._uU(4,"\n    "),t.qZA()}if(2&a){const e=t.oxw(2);t.Q6J("ngStyle",t.VKq(3,Y,e.cardHeight)),t.xp6(2),t.Q6J("results",e.resultSet)("gradient",e.gradient)}}const K=function(a){return{"is-invalid":a}};function pe(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",1),t._uU(1,"\n    "),t.TgZ(2,"ngb-alert",2),t._uU(3,"\n        "),t.TgZ(4,"form",3),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().onSubmit()}),t._uU(5,"\n            "),t.TgZ(6,"div",4),t._uU(7,"\n                "),t.TgZ(8,"div",5),t._uU(9,"\n                    "),t.TgZ(10,"div",6),t._uU(11,"\n                        "),t.TgZ(12,"label",7),t._uU(13,"Field:"),t.qZA(),t._uU(14,"\n                        "),t.TgZ(15,"mat-select",8),t._uU(16,"\n                            "),t.YNc(17,Wt,2,2,"mat-option",9),t._uU(18,"\n                        "),t.qZA(),t._uU(19,"\n                        "),t.YNc(20,Xt,4,1,"div",10),t._uU(21,"\n                    "),t.qZA(),t._uU(22,"\n                "),t.qZA(),t._uU(23,"\n                \n                "),t.TgZ(24,"div",5),t._uU(25,"\n                    "),t.TgZ(26,"div",6),t._uU(27,"\n                        "),t.TgZ(28,"label",11),t._uU(29,"Chart Height:"),t.qZA(),t._uU(30,"\n                        "),t._UZ(31,"input",12),t._uU(32,"\n                        "),t.YNc(33,ee,4,1,"div",10),t._uU(34,"\n                    "),t.qZA(),t._uU(35,"\n                "),t.qZA(),t._uU(36,"\n                "),t.TgZ(37,"div",5),t._uU(38,"\n                    "),t.TgZ(39,"div",6),t._uU(40,"\n                        "),t.TgZ(41,"label",7),t._uU(42,"Chart Type:"),t.qZA(),t._uU(43,"        \n                        "),t.TgZ(44,"mat-button-toggle-group",13),t._uU(45,"\n                            "),t.YNc(46,re,9,5,"mat-button-toggle",9),t._uU(47,"\n                        "),t.qZA(),t._uU(48,"\n                        "),t.qZA(),t._uU(49,"\n                "),t.qZA(),t._uU(50,"\n                "),t.TgZ(51,"div",14),t._uU(52,"\n                    "),t.TgZ(53,"div",15),t._uU(54,"\n                        "),t.TgZ(55,"label",16),t._uU(56," \xa0 "),t.qZA(),t._uU(57,"\n                        "),t.TgZ(58,"button",17),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSubmit}),t._uU(59,"Submit"),t.qZA(),t._uU(60,"\n                    "),t.qZA(),t._uU(61,"\n                "),t.qZA(),t._uU(62,"\n            "),t.qZA(),t._uU(63,"\n            \n        "),t.qZA(),t._uU(64,"\n    "),t.qZA(),t._uU(65,"\n  \n    "),t.TgZ(66,"div",18),t._uU(67,"\n    "),t.YNc(68,oe,5,4,"div",19),t._uU(69,"\n    "),t.YNc(70,le,5,11,"div",20),t._uU(71,"\n    "),t.YNc(72,ce,5,11,"div",20),t._uU(73,"\n    "),t.YNc(74,ue,5,5,"div",20),t._uU(75,"\n    "),t.YNc(76,de,5,5,"div",20),t._uU(77,"\n"),t.qZA(),t._uU(78,"\n "),t.qZA()}if(2&a){const e=t.oxw();t.xp6(2),t.Q6J("dismissible",!1),t.xp6(2),t.Q6J("formGroup",e.registerForm),t.xp6(11),t.Q6J("ngClass",t.VKq(14,K,e.submitted&&e.f.field.errors)),t.xp6(2),t.Q6J("ngForOf",e.attributeList),t.xp6(3),t.Q6J("ngIf",e.submitted&&e.f.field.errors),t.xp6(11),t.Q6J("ngClass",t.VKq(16,K,e.submitted&&e.f.height.errors)),t.xp6(2),t.Q6J("ngIf",e.submitted&&e.f.height.errors),t.xp6(11),t.Q6J("ngClass",t.VKq(18,K,e.submitted&&e.f.chartType.errors)),t.xp6(2),t.Q6J("ngForOf",e.chartTypeList),t.xp6(22),t.Q6J("ngIf",e.showPie),t.xp6(2),t.Q6J("ngIf",e.showBar),t.xp6(2),t.Q6J("ngIf",e.showBarVer),t.xp6(2),t.Q6J("ngIf",e.showAdv),t.xp6(2),t.Q6J("ngIf",e.showPieC)}}let me=(()=>{class a{constructor(e,i,n,r,l,p,m,f,o,v,_,u,h){this.formBuilder=e,this.route=i,this._client=n,this.dynamicobjectappServie=r,this.dialog=l,this._spinner=p,this.router=m,this.tms=f,this._auth=o,this.toastService=v,this.commonService=_,this.userService=u,this.sanitizer=h,this.showPie=!1,this.showBar=!1,this.showAdv=!1,this.showBarVer=!1,this.showPieC=!1,this.submitted=!1,this.title="View Record",this.listsScope={},this.usersList=[],this.teamList=[],this.dataLoaded=!1,this.isLoadedData=!1,this.isLoadedAttributes=!1,this.view=[600,400],this.chartTypeList=["PIE CHART","BAR VERTICAL","BAR HORIZONTAL","ADVANCED"],this.showChart=!1,this.showXAxis=!0,this.showYAxis=!0,this.gradient=!1,this.showLegend=!0,this.showXAxisLabel=!0,this.xAxisLabel="Group",this.showYAxisLabel=!0,this.yAxisLabel="Count",this.timeline=!0,this.colorScheme={domain:["#9370DB","#87CEFA","#FA8072","#FF7F50","#90EE90","#9370DB"]},this.showLabels=!0,this.loggedUser=o.getUser(),f.getTeams().then(g=>{this.teamList=g}).catch(g=>{}),u.getUsers().then(g=>{this.usersList=g}).catch(g=>{})}filterAttributes(e){var i=[],n=[];for(var r in e)"autokey"!=e[r].type.value&&"richtext"!=e[r].type.value&&(1!=e[r].isPrimaryKey.value||"true"!=e[r].isPrimaryKey.value.toString())&&i.push(e[r]),(1==e[r].isPrimaryKey.value||"true"==e[r].isPrimaryKey.value)&&(e[r].disabled=!0,i.push(e[r])),"richtext"==e[r].type.value&&n.push(e[r]);for(var r in n)i.push(n[r]);return i}ngOnInit(){this.registerForm=this.formBuilder.group({field:[null,c.kI.required],chartType:["PIE CHART",c.kI.required],height:[300,c.kI.required]}),this.app=this.route.snapshot.params.app,void 0===history.state.recordData?this.dynamicobjectappServie.getDynamicObjectAppRecords(this.app).then(n=>{this._spinner.setSpinnerState(!1),(n=JSON.parse(n)).status?(this.recordData=this.parseObjectRecords(n.data),this.isLoaded=!0,this.isLoadedData=!0):(this.openDialog({type:"alert",message:n.message},null),this.isLoaded=!1,this.isDataloadFailed=!0)}).catch(n=>{this._spinner.setSpinnerState(!1),this.isLoaded=!1}):(this.recordData=history.state.recordData,this.isLoadedData=!0),void 0!==history.state.attributes?(this.attributeList=this.filterAttributes(history.state.attributes),this.isLoadedAttributes=!0):this.dynamicobjectappServie.getDynamicObjectAppAttributes(this.app).then(n=>{this._spinner.setSpinnerState(!1),(n=JSON.parse(n)).status?(this.attributeList=this.filterAttributes(n.data),console.log(this.attributeList),this.dataLoaded=!0,this.isLoadedAttributes=!0):this.openDialog({type:"alert",message:n.message},()=>{this.router.navigate([".."],{relativeTo:this.route})})}).catch(n=>{this._spinner.setSpinnerState(!1),console.log("error occurred ",n),this.openDialog({type:"alert",message:n.toString()},()=>{this.router.navigate([".."],{relativeTo:this.route})})})}parseObjectRecords(e){var i=[],n=1;for(var r in e){var l=e[r];l.id=n,i.push(l),n++}return i}parseAttributesToFormItems(){var e={};for(var i in this.attributeList){var n=[],r=this.recordData[this.attributeList[i].name.value],l=[];for(var p in this.attributeList[i].validators.value)switch(this.attributeList[i].validators.value[p].element.type.value){case"required":l.push(c.kI.required),this.attributeList[i].required=!0;break;case"whitespace":case"whitspace":l.push(F.w.restrictWhiteSpace)}if(this.attributeList[i].type.value.toString().includes("list")){var m=this.attributeList[i].type.value.toString().split(":");this.commonService.getListItems(m[m.length-1],i).then(o=>{null!=o.res&&0!=o.res.length?this.listsScope[this.attributeList[o.item].name.value]=o.res:this.attributeList[o.item].required?this.openDialog({type:"alert",message:"List load failed for a mandatory field. Please contact system administrator."},()=>{this.router.navigate([".."],{relativeTo:this.route})}):this.openDialog({type:"warn",message:"List load failed for field: "+this.attributeList[o.item].alias.value+"."},null)}).catch(o=>{console.log(o),this.attributeList[o.item].required?this.openDialog({type:"alert",message:"List load failed for a mandatory field. Please contact system administrator."},()=>{this.router.navigate([".."],{relativeTo:this.route})}):this.openDialog({type:"warn",message:"List load failed for field: "+this.attributeList[o.item].alias.value+"."},null)})}this.attributeList[i].disabled&&(r={value:r,disabled:!0}),n.push(r),n.push(l),e[this.attributeList[i].name.value]=n}return e}get f(){return this.registerForm.controls}checkIfAttributeRequired(e){return!!this.attributeList[e].required&&this.attributeList[e].required}checkIsInvalid(e){return!!this.registerForm.controls[e].errors}checkIsInvalidRequired(e){return!!this.registerForm.controls[e].errors&&!!(this.registerForm.controls[e].errors||"").required}checkIsInvalidWhiteSpace(e){return!!this.registerForm.controls[e].errors&&!!(this.registerForm.controls[e].errors||"").restrictWhiteSpace}checkIsInvalidLength(e){return!!this.registerForm.controls[e].errors&&!!(this.registerForm.controls[e].errors||"").maxlength}getFormCotrolData(e){return this.registerForm.controls[e].value}onSubmit(){console.log("onSubmit Called"),this.toggleChart(this.registerForm.value.chartType),console.log(this.registerForm.value),this.getParseData(this.registerForm.value.field),this.cardHeight=this.registerForm.value.height,this.showChart=!0}toggleChart(e){console.log("toggleChart :: ",e),"BAR HORIZONTAL"==e?(this.showBar=!0,this.showAdv=!1,this.showPie=!1,this.showBarVer=!1,this.showPieC=!1):"PIE CHART"==e?(this.showBar=!1,this.showAdv=!1,this.showPie=!1,this.showPieC=!0,this.showBarVer=!1):"PIE GRID"==e?(this.showBar=!1,this.showAdv=!1,this.showPie=!0,this.showBarVer=!1,this.showPieC=!1):"ADVANCED"==e?(this.showBar=!1,this.showAdv=!0,this.showPie=!1,this.showBarVer=!1,this.showPieC=!1):(e="BAR VERTICAL")&&(this.showBar=!1,this.showAdv=!1,this.showPie=!1,this.showBarVer=!0,this.showPieC=!1)}getParseData(e){var r,i=[];r=this.groupBy(this.recordData,l=>l[e]),[...new Set(this.recordData.map(l=>l[e]))].forEach(l=>{if(void 0!==l){var p=r.get(l);i.push({name:l+"",value:p.length})}}),console.log(this.resultSet),this.resultSet=i}groupBy(e,i){const n=new Map;return e.forEach(r=>{const l=i(r),p=n.get(l);p?p.push(r):n.set(l,[r])}),n}openDialog(e,i){this.dialog.open(A.h,{data:e,panelClass:"app-dialog-class"}).afterClosed().toPromise().then(n=>{"function"==typeof i&&i()})}onSelect(e){}onActivate(e){}onDeactivate(e){}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(c.qu),t.Y36(y.gz),t.Y36(T.l),t.Y36(O),t.Y36(D.uw),t.Y36(S.V),t.Y36(y.F0),t.Y36(N.U),t.Y36(w.q),t.Y36(R.k),t.Y36(q.v),t.Y36(j.K),t.Y36(et.H7))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-dynamicobjectapp-charts-view"]],decls:6,vars:1,consts:[["class","container-fluid mt-3  no-scroller",4,"ngIf"],[1,"container-fluid","mt-3","no-scroller"],["type","warning",3,"dismissible"],[3,"formGroup","ngSubmit"],[1,"row","w-100"],[1,"col-sm-2"],[1,"form-group","required"],["for","field"],["id","field","formControlName","field",1,"form-control",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["for","height"],["id","height","type","text","formControlName","height",1,"form-control",3,"ngClass"],["id","chartType","height","20","formControlName","chartType",3,"ngClass"],[1,"col-sm-2","ml-5"],[1,"form-group"],["for","button"],["mat-stroked-button","","name","button","type","submit",1,"btn","form-control","float-sm-right","text-capitalize",2,"background-color","white",3,"click"],[1,"p-4"],["id","pie-chart-parent",3,"ngStyle",4,"ngIf"],["class","chart",3,"ngStyle",4,"ngIf"],[3,"value"],[1,"invalid-feedback"],["class","ml-1",4,"ngIf"],[1,"ml-1"],["class","fa fa-pie-chart",3,"matTooltip","ngClass",4,"ngIf"],["class","fa fa-bar-chart-o",3,"ngClass","matTooltip",4,"ngIf"],["class","fa fa-bar-chart rotate90",3,"ngClass","matTooltip",4,"ngIf"],["class","fa fa-area-chart",3,"ngClass","matTooltip",4,"ngIf"],[1,"fa","fa-pie-chart",3,"matTooltip","ngClass"],[1,"fa","fa-bar-chart-o",3,"ngClass","matTooltip"],[1,"fa","fa-bar-chart","rotate90",3,"ngClass","matTooltip"],[1,"fa","fa-area-chart",3,"ngClass","matTooltip"],["id","pie-chart-parent",3,"ngStyle"],[3,"view","results"],[1,"chart",3,"ngStyle"],[3,"results","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel"],[3,"results","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","yAxisLabel","xAxisLabel"],[3,"results","gradient","select","activate","deactivate"],["labels","true","maxLabelLength","100","legends","true","trimLabels","false",3,"results","gradient","select","activate","deactivate"]],template:function(e,i){1&e&&(t._uU(0,"\n"),t._uU(1,"\n"),t._UZ(2,"app-path"),t._uU(3,"\n"),t._uU(4,"\n"),t.YNc(5,pe,79,20,"div",0)),2&e&&(t.xp6(5),t.Q6J("ngIf",i.isLoadedData&&i.isLoadedAttributes))},directives:[J.l,b.O5,Ht.xm,c._Y,c.JL,c.sg,Mt.gD,c.JJ,c.u,b.mk,b.sg,Bt.ey,c.Fj,it.A9,it.Yi,zt.gM,G.lW,b.PC,L.Nm,L.$e,L.K$,L.MP,L.JU],styles:["",".center-block[_ngcontent-%COMP%] {\n        margin-left: auto;\n        margin-right: auto;\n        display: block;\n    }\n    \n    .link[_ngcontent-%COMP%] {\n        cursor: pointer;\n    }\n    \n    .only-verical-scroller[_ngcontent-%COMP%] {\n        overflow-y: scroll;\n        overflow-x: hidden !important;\n    }\n    \n    .no-scroller[_ngcontent-%COMP%] {\n        overflow-y: hidden !important;\n        overflow-x: hidden !important;\n    }"]}),a})();const I=function(a){return{"is-invalid":a}};function _e(a,s){if(1&a&&t._UZ(0,"input",25),2&a){const e=t.oxw(2).index,i=t.oxw(2);t.s9C("id",i.attributeList[e].alias.value),t.s9C("formControlName",i.attributeList[e].name.value),t.Q6J("ngClass",t.VKq(3,I,i.submitted&&i.checkIsInvalid(i.attributeList[e].name.value.toString())))}}function he(a,s){if(1&a&&t._UZ(0,"input",26),2&a){const e=t.oxw(2).index,i=t.oxw(2);t.s9C("id",i.attributeList[e].alias.value),t.s9C("formControlName",i.attributeList[e].name.value),t.Q6J("ngClass",t.VKq(3,I,i.submitted&&i.checkIsInvalid(i.attributeList[e].name.value.toString())))}}function fe(a,s){if(1&a&&(t.TgZ(0,"option",29),t._uU(1),t.qZA()),2&a){const e=s.index,i=t.oxw(3).index,n=t.oxw(2);t.Q6J("ngValue",n.listsScope[n.attributeList[i].name.value][e].value),t.xp6(1),t.Oqu(n.listsScope[n.attributeList[i].name.value][e].text)}}function ge(a,s){if(1&a&&(t.TgZ(0,"select",27),t._uU(1,"\n                                "),t.YNc(2,fe,2,2,"option",28),t._uU(3,"\n                            "),t.qZA()),2&a){const e=t.oxw(2).index,i=t.oxw(2);t.s9C("id",i.attributeList[e].alias.value),t.s9C("formControlName",i.attributeList[e].name.value),t.Q6J("ngClass",t.VKq(4,I,i.submitted&&i.checkIsInvalid(i.attributeList[e].name.value.toString()))),t.xp6(2),t.Q6J("ngForOf",i.listsScope[i.attributeList[e].name.value])}}function ve(a,s){1&a&&t._UZ(0,"span",30)}const E=function(a){return{"is-ngx-invalid is-invalid":a}};function be(a,s){if(1&a&&(t.TgZ(0,"ng-select",31),t._uU(1,"\n                            "),t.qZA()),2&a){const e=t.oxw(2).index,i=t.oxw(2);t.s9C("formControlName",i.attributeList[e].name.value),t.Q6J("items",i.usersList)("ngClass",t.VKq(3,E,i.submitted&&i.checkIsInvalid(i.attributeList[e].name.value.toString())))}}function xe(a,s){1&a&&t._UZ(0,"span",30)}function ye(a,s){if(1&a&&(t.TgZ(0,"ng-select",32),t._uU(1,"\n                            "),t.qZA()),2&a){const e=t.oxw(2).index,i=t.oxw(2);t.s9C("formControlName",i.attributeList[e].name.value),t.Q6J("items",i.teamList)("ngClass",t.VKq(3,E,i.submitted&&i.checkIsInvalid(i.attributeList[e].name.value.toString())))}}const at=function(){return{height:"200px"}},nt=function(a){return{"is-richtext-invalid is-invalid":a}};function Ce(a,s){if(1&a&&t._UZ(0,"quill-editor",33),2&a){const e=t.oxw(2).index,i=t.oxw(2);t.s9C("id",i.attributeList[e].name.value),t.s9C("formControlName",i.attributeList[e].name.value),t.Q6J("styles",t.DdM(4,at))("ngClass",t.VKq(5,nt,i.submitted&&i.checkIsInvalid(i.attributeList[e].name.value.toString())))}}function Le(a,s){if(1&a&&(t.TgZ(0,"div",36),t._uU(1),t.qZA()),2&a){const e=t.oxw(3).index,i=t.oxw(2);t.xp6(1),t.hij("",i.attributeList[e].alias.value," is required")}}function Ae(a,s){1&a&&(t.TgZ(0,"div",36),t._uU(1,"White Space is not allowed."),t.qZA())}function Ue(a,s){1&a&&(t.TgZ(0,"div",36),t._uU(1,"Invalid Email !"),t.qZA())}function Te(a,s){if(1&a&&(t.TgZ(0,"div",34),t._uU(1,"\n                                "),t.YNc(2,Le,2,1,"div",35),t._uU(3,"\n                                "),t.YNc(4,Ae,2,0,"div",35),t._uU(5,"\n                                "),t.YNc(6,Ue,2,0,"div",35),t._uU(7,"\n                            "),t.qZA()),2&a){const e=t.oxw(2).index,i=t.oxw(2);t.xp6(2),t.Q6J("ngIf",i.checkIsInvalidRequired(i.attributeList[e].name.value.toString())),t.xp6(2),t.Q6J("ngIf",i.checkIsInvalidWhiteSpace(i.attributeList[e].name.value.toString())),t.xp6(2),t.Q6J("ngIf",i.checkIsInvalidEmail(i.attributeList[e].name.value.toString()))}}const st=function(a){return{required:a}};function we(a,s){if(1&a&&(t.TgZ(0,"div",14),t._uU(1," \n                        "),t.TgZ(2,"div",15),t._uU(3,"\n                            "),t.TgZ(4,"label",16),t._uU(5),t.qZA(),t._uU(6,"\n                            "),t.YNc(7,_e,1,5,"input",17),t._uU(8,"\n                            "),t.YNc(9,he,1,5,"input",18),t._uU(10,"\n                            "),t.YNc(11,ge,4,6,"select",19),t._uU(12,"\n                            "),t.YNc(13,ve,1,0,"span",20),t._uU(14,"\n                            "),t.YNc(15,be,2,5,"ng-select",21),t._uU(16,"\n                            "),t.YNc(17,xe,1,0,"span",20),t._uU(18,"\n                            "),t.YNc(19,ye,2,5,"ng-select",22),t._uU(20,"\n                            "),t.YNc(21,Ce,1,7,"quill-editor",23),t._uU(22,"\n                           \n                            "),t.YNc(23,Te,8,3,"div",24),t._uU(24,"\n                        "),t.qZA(),t._uU(25,"\n                    "),t.qZA()),2&a){const e=t.oxw().index,i=t.oxw(2);t.xp6(2),t.Q6J("ngClass",t.VKq(12,st,i.checkIfAttributeRequired(e))),t.xp6(2),t.s9C("for",i.attributeList[e].name.value),t.xp6(1),t.hij("",i.attributeList[e].alias.value,":"),t.xp6(2),t.Q6J("ngIf","string"==i.attributeList[e].type.value),t.xp6(2),t.Q6J("ngIf","number"==i.attributeList[e].type.value||"autokey"==i.attributeList[e].type.value),t.xp6(2),t.Q6J("ngIf",i.attributeList[e].type.value.toString().includes("list")),t.xp6(2),t.Q6J("ngIf","user"==i.attributeList[e].type.value),t.xp6(2),t.Q6J("ngIf","user"==i.attributeList[e].type.value),t.xp6(2),t.Q6J("ngIf","team"==i.attributeList[e].type.value),t.xp6(2),t.Q6J("ngIf","team"==i.attributeList[e].type.value),t.xp6(2),t.Q6J("ngIf","richtext"==i.attributeList[e].type.value),t.xp6(2),t.Q6J("ngIf",i.submitted&&i.checkIsInvalid(i.attributeList[e].name.value.toString()))}}function Se(a,s){if(1&a&&t._UZ(0,"input",25),2&a){const e=t.oxw(2).index,i=t.oxw(2);t.s9C("id",i.attributeList[e+1].alias.value),t.s9C("formControlName",i.attributeList[e+1].name.value),t.Q6J("ngClass",t.VKq(3,I,i.submitted&&i.checkIsInvalid(i.attributeList[e+1].name.value)))}}function De(a,s){if(1&a&&t._UZ(0,"input",26),2&a){const e=t.oxw(2).index,i=t.oxw(2);t.s9C("id",i.attributeList[e+1].alias.value),t.s9C("formControlName",i.attributeList[e+1].name.value),t.Q6J("ngClass",t.VKq(3,I,i.submitted&&i.checkIsInvalid(i.attributeList[e+1].name.value)))}}function Ze(a,s){if(1&a&&(t.TgZ(0,"option",29),t._uU(1),t.qZA()),2&a){const e=s.index,i=t.oxw(3).index,n=t.oxw(2);t.Q6J("ngValue",n.listsScope[n.attributeList[i+1].name.value][e].value),t.xp6(1),t.Oqu(n.listsScope[n.attributeList[i+1].name.value][e].text)}}function Ie(a,s){if(1&a&&(t.TgZ(0,"select",27),t._uU(1,"\n                                "),t.YNc(2,Ze,2,2,"option",28),t._uU(3,"\n                            "),t.qZA()),2&a){const e=t.oxw(2).index,i=t.oxw(2);t.s9C("id",i.attributeList[e+1].alias.value),t.s9C("formControlName",i.attributeList[e+1].name.value),t.Q6J("ngClass",t.VKq(4,I,i.submitted&&i.checkIsInvalid(i.attributeList[e+1].name.value))),t.xp6(2),t.Q6J("ngForOf",i.listsScope[i.attributeList[e+1].name.value])}}function Oe(a,s){1&a&&t._UZ(0,"span",30)}function je(a,s){if(1&a&&(t.TgZ(0,"ng-select",31),t._uU(1,"\n                            "),t.qZA()),2&a){const e=t.oxw(2).index,i=t.oxw(2);t.s9C("formControlName",i.attributeList[e+1].name.value),t.Q6J("items",i.usersList)("ngClass",t.VKq(3,E,i.submitted&&i.checkIsInvalid(i.attributeList[e+1].name.value.toString())))}}function qe(a,s){1&a&&t._UZ(0,"span",30)}function Re(a,s){if(1&a&&(t.TgZ(0,"ng-select",32),t._uU(1,"\n                            "),t.qZA()),2&a){const e=t.oxw(2).index,i=t.oxw(2);t.s9C("formControlName",i.attributeList[e+1].name.value),t.Q6J("items",i.teamList)("ngClass",t.VKq(3,E,i.submitted&&i.checkIsInvalid(i.attributeList[e+1].name.value.toString())))}}function Je(a,s){if(1&a&&t._UZ(0,"quill-editor",38),2&a){const e=t.oxw(2).index,i=t.oxw(2);t.s9C("name",i.attributeList[e+1].name.value),t.s9C("id",i.attributeList[e+1].name.value),t.s9C("formControlName",i.attributeList[e+1].name.value),t.Q6J("styles",t.DdM(5,at))("ngClass",t.VKq(6,nt,i.submitted&&i.checkIsInvalid(i.attributeList[e+1].name.value.toString())))}}function Ye(a,s){if(1&a&&(t.TgZ(0,"div",36),t._uU(1),t.qZA()),2&a){const e=t.oxw(3).index,i=t.oxw(2);t.xp6(1),t.hij("",i.attributeList[e+1].alias.value," is required")}}function Fe(a,s){1&a&&(t.TgZ(0,"div",36),t._uU(1,"White Space is not allowed."),t.qZA())}function Ne(a,s){1&a&&(t.TgZ(0,"div",36),t._uU(1,"Invalid Email !"),t.qZA())}function Qe(a,s){if(1&a&&(t.TgZ(0,"div",34),t._uU(1,"\n                                "),t.YNc(2,Ye,2,1,"div",35),t._uU(3,"\n                                "),t.YNc(4,Fe,2,0,"div",35),t._uU(5,"\n                                "),t.YNc(6,Ne,2,0,"div",35),t._uU(7,"\n                            "),t.qZA()),2&a){const e=t.oxw(2).index,i=t.oxw(2);t.xp6(2),t.Q6J("ngIf",i.checkIsInvalidRequired(i.attributeList[e+1].name.value)),t.xp6(2),t.Q6J("ngIf",i.checkIsInvalidWhiteSpace(i.attributeList[e+1].name.value)),t.xp6(2),t.Q6J("ngIf",i.checkIsInvalidEmail(i.attributeList[e+1].name.value.toString()))}}function Ve(a,s){if(1&a&&(t.TgZ(0,"div",14),t._uU(1,"\n                        "),t.TgZ(2,"div",15),t._uU(3,"\n                            "),t.TgZ(4,"label",16),t._uU(5),t.qZA(),t._uU(6,"\n                            "),t.YNc(7,Se,1,5,"input",17),t._uU(8,"\n                            "),t.YNc(9,De,1,5,"input",18),t._uU(10,"\n                            "),t.YNc(11,Ie,4,6,"select",19),t._uU(12,"\n                            "),t.YNc(13,Oe,1,0,"span",20),t._uU(14,"\n                            "),t.YNc(15,je,2,5,"ng-select",21),t._uU(16,"\n                            "),t.YNc(17,qe,1,0,"span",20),t._uU(18,"\n                            "),t.YNc(19,Re,2,5,"ng-select",22),t._uU(20,"\n                            "),t.YNc(21,Je,1,8,"quill-editor",37),t._uU(22,"\n                            \n                            "),t.YNc(23,Qe,8,3,"div",24),t._uU(24,"\n                        "),t.qZA(),t._uU(25,"\n                    "),t.qZA()),2&a){const e=t.oxw().index,i=t.oxw(2);t.xp6(2),t.Q6J("ngClass",t.VKq(12,st,i.checkIfAttributeRequired(e+1))),t.xp6(2),t.s9C("for",i.attributeList[e+1].name.value),t.xp6(1),t.hij("",i.attributeList[e+1].alias.value,":"),t.xp6(2),t.Q6J("ngIf","string"==i.attributeList[e+1].type.value),t.xp6(2),t.Q6J("ngIf","number"==i.attributeList[e+1].type.value||"autokey"==i.attributeList[e+1].type.value),t.xp6(2),t.Q6J("ngIf",i.attributeList[e+1].type.value.toString().includes("list")),t.xp6(2),t.Q6J("ngIf","user"==i.attributeList[e+1].type.value),t.xp6(2),t.Q6J("ngIf","user"==i.attributeList[e+1].type.value),t.xp6(2),t.Q6J("ngIf","team"==i.attributeList[e+1].type.value),t.xp6(2),t.Q6J("ngIf","team"==i.attributeList[e+1].type.value),t.xp6(2),t.Q6J("ngIf","richtext"==i.attributeList[e+1].type.value),t.xp6(2),t.Q6J("ngIf",i.submitted&&i.checkIsInvalid(i.attributeList[e+1].name.value))}}const Ee=function(a){return{hidden:a}};function ke(a,s){if(1&a&&(t.TgZ(0,"div",12),t._uU(1,"\n                    "),t.YNc(2,we,26,14,"div",13),t._uU(3,"\n                    "),t.YNc(4,Ve,26,14,"div",13),t._uU(5,"\n                "),t.qZA()),2&a){const e=s.index,i=s.even,n=t.oxw(2);t.Q6J("ngClass",t.VKq(3,Ee,!i)),t.xp6(2),t.Q6J("ngIf",i),t.xp6(2),t.Q6J("ngIf",i&&e!=n.attributeList.length-1)}}function Pe(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"form",6),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().onSubmit()}),t._uU(1,"\n        "),t.TgZ(2,"div",7),t._uU(3,"\n            "),t.TgZ(4,"div",8),t._uU(5,"\n                "),t.YNc(6,ke,6,5,"div",9),t._uU(7,"\n            "),t.qZA(),t._uU(8,"\n        "),t.qZA(),t._uU(9,"\n        "),t.TgZ(10,"div",7),t._uU(11,"\n            "),t.TgZ(12,"div",10),t._uU(13,"\n                "),t.TgZ(14,"button",11),t._uU(15,"Submit"),t.qZA(),t._uU(16,"\n            "),t.qZA(),t._uU(17,"\n        "),t.qZA(),t._uU(18,"\n    "),t.qZA()}if(2&a){const e=t.oxw();t.Q6J("formGroup",e.registerForm),t.xp6(6),t.Q6J("ngForOf",e.attributeList)}}let Ge=(()=>{class a{constructor(e,i,n,r,l,p,m,f,o,v,_,u){this.formBuilder=e,this.route=i,this._client=n,this.dynamicobjectappServie=r,this.dialog=l,this._spinner=p,this.router=m,this.tms=f,this._auth=o,this.toastService=v,this.commonService=_,this.userService=u,this.registerForm=new c.cw({}),this.submitted=!1,this.title="Edit Record",this.listsScope={},this.usersList=[],this.teamList=[],this.dataLoaded=!1,this.loggedUser=o.getUser(),f.getTeams().then(h=>{this.teamList=h}).catch(h=>{}),u.getUsers().then(h=>{this.usersList=h}).catch(h=>{})}filterAttributes(e){var i=[];for(var n in e)"autokey"!=e[n].type.value&&(1!=e[n].isPrimaryKey.value||"true"!=e[n].isPrimaryKey.value.toString())&&i.push(e[n]),(1==e[n].isPrimaryKey.value||"true"==e[n].isPrimaryKey.value)&&(e[n].disabled=!0,i.push(e[n]));return i}ngOnInit(){this.app=this.route.snapshot.params.app,void 0!==history.state.recordData?(this.recordData=history.state.recordData,void 0!==history.state.attributes?(this.attributeList=this.filterAttributes(history.state.attributes),this.registerForm=this.formBuilder.group(this.parseAttributesToFormItems())):this.dynamicobjectappServie.getDynamicObjectAppAttributes(this.app).then(i=>{this._spinner.setSpinnerState(!1),(i=JSON.parse(i)).status?(this.attributeList=this.filterAttributes(i.data),this.registerForm=this.formBuilder.group(this.parseAttributesToFormItems()),this.dataLoaded=!0):this.openDialog({type:"alert",message:i.message},()=>{this.router.navigate([".."],{relativeTo:this.route})})}).catch(i=>{this._spinner.setSpinnerState(!1),console.log("error occurred ",i),this.openDialog({type:"alert",message:i.toString()},()=>{this.router.navigate([".."],{relativeTo:this.route})})})):this.openDialog({type:"alert",message:"No record selected!"},()=>{this.router.navigate([".."],{relativeTo:this.route})})}parseAttributesToFormItems(){var e={};for(var i in this.attributeList){var n=[],r=this.recordData[this.attributeList[i].name.value],l=[];for(var p in this.attributeList[i].validators.value)switch(this.attributeList[i].validators.value[p].element.type.value){case"required":l.push(c.kI.required),this.attributeList[i].required=!0;break;case"whitespace":case"whitspace":l.push(F.w.restrictWhiteSpace);break;case"email":l.push(c.kI.email)}if(this.attributeList[i].type.value.toString().includes("list")){var m=this.attributeList[i].type.value.toString().split(":");this.commonService.getListItems(m[m.length-1],i).then(o=>{null!=o.res&&0!=o.res.length?this.listsScope[this.attributeList[o.item].name.value]=o.res:this.attributeList[o.item].required?this.openDialog({type:"alert",message:"List load failed for a mandatory field. Please contact system administrator."},()=>{this.router.navigate([".."],{relativeTo:this.route})}):this.openDialog({type:"warn",message:"List load failed for field: "+this.attributeList[o.item].alias.value+"."},null)}).catch(o=>{console.log(o),this.attributeList[o.item].required?this.openDialog({type:"alert",message:"List load failed for a mandatory field. Please contact system administrator."},()=>{this.router.navigate([".."],{relativeTo:this.route})}):this.openDialog({type:"warn",message:"List load failed for field: "+this.attributeList[o.item].alias.value+"."},null)})}this.attributeList[i].disabled&&(r={value:r,disabled:!0}),n.push(r),n.push(l),e[this.attributeList[i].name.value]=n}return e}get f(){return this.registerForm.controls}checkIfAttributeRequired(e){return!!this.attributeList[e].required&&this.attributeList[e].required}checkIsInvalid(e){return!!this.registerForm.controls[e].errors}checkIsInvalidRequired(e){return!!this.registerForm.controls[e].errors&&!!(this.registerForm.controls[e].errors||"").required}checkIsInvalidEmail(e){return!!this.registerForm.controls[e].errors&&!!(this.registerForm.controls[e].errors||"").email}checkIsInvalidWhiteSpace(e){return!!this.registerForm.controls[e].errors&&!!(this.registerForm.controls[e].errors||"").restrictWhiteSpace}checkIsInvalidLength(e){return!!this.registerForm.controls[e].errors&&!!(this.registerForm.controls[e].errors||"").maxlength}getFormCotrolData(e){return this.registerForm.controls[e].value}onSubmit(){if(this.submitted=!0,this._spinner.setSpinnerState(!0),this.registerForm.invalid)this._spinner.setSpinnerState(!1);else{var i={headers:new U.WM({"Content-Type":"application/json"})};this._client.post("api/dynamicobjects/"+this.app+"/update",this.registerForm.getRawValue(),i).then(r=>{this._spinner.setSpinnerState(!1),r&&(r=JSON.parse(r)),"SUCCESS"==r.status||r.status?this.loggedUser.useToast?(this.toastService.showSuccess(r.message,5e3),this.router.navigate(["../"],{relativeTo:this.route})):this.openDialog({type:"message",message:r.message},()=>{this.router.navigate(["../"],{relativeTo:this.route})}):(this._spinner.setSpinnerState(!1),this.openDialog({type:"alert",message:r.message},null))}).catch(r=>{this._spinner.setSpinnerState(!1),this.openDialog({type:"alert",message:r.message},null)})}}openDialog(e,i){this.dialog.open(A.h,{data:e,panelClass:"app-dialog-class"}).afterClosed().toPromise().then(n=>{"function"==typeof i&&i()})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(c.qu),t.Y36(y.gz),t.Y36(T.l),t.Y36(O),t.Y36(D.uw),t.Y36(S.V),t.Y36(y.F0),t.Y36(N.U),t.Y36(w.q),t.Y36(R.k),t.Y36(q.v),t.Y36(j.K))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-dynamicobjectapp-edit-record"]],decls:21,vars:2,consts:[[1,"container-fluid-lg","p-3","my-3"],[1,"row"],[1,"col-xs-6"],[1,"page-title","ml-3"],["area-label","false",1,"fa","fa-th"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"row","ml-4"],[1,"col-lg-12"],["class","row p-0 ",3,"ngClass",4,"ngFor","ngForOf"],[1,"col"],["type","submit","mat-button","",1,"btn","float-sm-right","text-capitalize","btn-primary","mui-w-100","mui-text-bold"],[1,"row","p-0",3,"ngClass"],["class","col-sm-6",4,"ngIf"],[1,"col-sm-6"],[1,"form-group",3,"ngClass"],[3,"for"],["type","text","class","form-control ",3,"id","formControlName","ngClass",4,"ngIf"],["type","number","class","form-control ",3,"id","formControlName","ngClass",4,"ngIf"],["class","form-control ",3,"id","formControlName","ngClass",4,"ngIf"],["class","fa fa-users form-control-prefix-icon text-muted form-control","style","padding:0 !important;","area-label","false","area-label","false",4,"ngIf"],["class","form-control-include-icon","bindLabel","user_name","placeholder","Select User","bindValue","user_id","ngDefaultControl","",3,"items","formControlName","ngClass",4,"ngIf"],["class","form-control-include-icon","bindLabel","team_desc","placeholder","Select Team","bindValue","team_name","ngDefaultControl","",3,"items","formControlName","ngClass",4,"ngIf"],["name","technote","ngDefaultControl","",3,"styles","id","formControlName","ngClass",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["type","text",1,"form-control",3,"id","formControlName","ngClass"],["type","number",1,"form-control",3,"id","formControlName","ngClass"],[1,"form-control",3,"id","formControlName","ngClass"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["area-label","false","area-label","false",1,"fa","fa-users","form-control-prefix-icon","text-muted","form-control",2,"padding","0 !important"],["bindLabel","user_name","placeholder","Select User","bindValue","user_id","ngDefaultControl","",1,"form-control-include-icon",3,"items","formControlName","ngClass"],["bindLabel","team_desc","placeholder","Select Team","bindValue","team_name","ngDefaultControl","",1,"form-control-include-icon",3,"items","formControlName","ngClass"],["name","technote","ngDefaultControl","",3,"styles","id","formControlName","ngClass"],[1,"invalid-feedback"],["class","ml-1",4,"ngIf"],[1,"ml-1"],["ngDefaultControl","",3,"styles","name","id","formControlName","ngClass",4,"ngIf"],["ngDefaultControl","",3,"styles","name","id","formControlName","ngClass"]],template:function(e,i){1&e&&(t._uU(0,"\n"),t._uU(1,"\n"),t._UZ(2,"app-path"),t._uU(3,"\n\n"),t.TgZ(4,"div",0),t._uU(5,"\n    "),t.TgZ(6,"div",1),t._uU(7,"\n        "),t.TgZ(8,"div",2),t._uU(9,"\n            "),t.TgZ(10,"h3",3),t._uU(11,"\n                "),t._UZ(12,"i",4),t._uU(13),t._UZ(14,"hr"),t._uU(15,"\n            "),t.qZA(),t._uU(16,"\n        "),t.qZA(),t._uU(17,"\n    "),t.qZA(),t._uU(18,"\n    "),t.YNc(19,Pe,19,2,"form",5),t._uU(20,"\n\n\n\n"),t.qZA()),2&e&&(t.xp6(13),t.hij(" ",i.title,"\n                "),t.xp6(6),t.Q6J("ngIf",i.dataLoaded))},directives:[J.l,b.O5,c._Y,c.JL,c.sg,b.sg,b.mk,c.Fj,c.JJ,c.u,c.wV,c.EJ,c.YN,c.Kr,P.w9,W.g6,G.lW],styles:[""]}),a})();function Ke(a,s){if(1&a&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&a){const e=t.oxw(2).index,i=t.oxw(2);t.xp6(1),t.Oqu(i.recordData[i.attributeList[e].name.value])}}const rt=function(){return{height:"200px"}};function He(a,s){if(1&a&&t._UZ(0,"p",17),2&a){const e=t.oxw(2).index,i=t.oxw(2);t.Q6J("styles",t.DdM(2,rt))("innerHtml",i.sanitizer.bypassSecurityTrustHtml(i.recordData[i.attributeList[e].name.value]),t.oJD)}}function Me(a,s){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&a){const e=t.oxw(2).index,i=t.oxw(3).index,n=t.oxw(2);t.xp6(1),t.hij("(",n.listsScope[n.attributeList[i].name.value][e].template?n.listsScope[n.attributeList[i].name.value][e].text:null,")")}}function Be(a,s){if(1&a&&(t.TgZ(0,"p"),t._uU(1,"\n                                        "),t._UZ(2,"span",19),t._uU(3,"\n                                        "),t.YNc(4,Me,2,1,"span",15),t._uU(5,"\n                                    "),t.qZA()),2&a){const e=t.oxw().index,i=t.oxw(3).index,n=t.oxw(2);t.xp6(2),t.Q6J("innerHtml",n.sanitizer.bypassSecurityTrustHtml(n.listsScope[n.attributeList[i].name.value][e].template?n.listsScope[n.attributeList[i].name.value][e].template:n.listsScope[n.attributeList[i].name.value][e].text),t.oJD)("autoClose",!0),t.xp6(2),t.Q6J("ngIf",n.listsScope[n.attributeList[i].name.value][e].template)}}function ze(a,s){if(1&a&&(t.TgZ(0,"span"),t._uU(1,"\n                                    "),t.YNc(2,Be,6,3,"p",15),t._uU(3,"\n                                "),t.qZA()),2&a){const e=s.index,i=t.oxw(3).index,n=t.oxw(2);t.xp6(2),t.Q6J("ngIf",n.listsScope[n.attributeList[i].name.value][e].value==n.recordData[n.attributeList[i].name.value])}}function We(a,s){if(1&a&&(t.TgZ(0,"p"),t._uU(1,"\n                                "),t.YNc(2,ze,4,1,"span",18),t._uU(3,"\n                            "),t.qZA()),2&a){const e=t.oxw(2).index,i=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",i.listsScope[i.attributeList[e].name.value])}}function $e(a,s){if(1&a&&(t.TgZ(0,"div",12),t._uU(1," \n                        "),t.TgZ(2,"div",13),t._uU(3,"\n                            "),t.TgZ(4,"label",14),t._uU(5),t.qZA(),t._uU(6,"\n                            "),t.YNc(7,Ke,2,1,"p",15),t._uU(8,"\n                            "),t.YNc(9,He,1,3,"p",16),t._uU(10,"\n                            "),t.YNc(11,We,4,1,"p",15),t._uU(12,"\n                            "),t._uU(13,"\n                        "),t.qZA(),t._uU(14,"\n                    "),t.qZA()),2&a){const e=t.oxw().index,i=t.oxw(2);t.xp6(4),t.s9C("for",i.attributeList[e].name.value),t.xp6(1),t.hij("",i.attributeList[e].alias.value,":"),t.xp6(2),t.Q6J("ngIf","string"==i.attributeList[e].type.value||"autokey"==i.attributeList[e].type.value||"number"==i.attributeList[e].type.value||"user"==i.attributeList[e].type.value||"team"==i.attributeList[e].type.value),t.xp6(2),t.Q6J("ngIf","richtext"==i.attributeList[e].type.value),t.xp6(2),t.Q6J("ngIf",i.attributeList[e].type.value.toString().includes("list"))}}function Xe(a,s){if(1&a&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&a){const e=t.oxw(2).index,i=t.oxw(2);t.xp6(1),t.Oqu(i.recordData[i.attributeList[e+1].name.value])}}function ti(a,s){if(1&a&&t._UZ(0,"p",17),2&a){const e=t.oxw(2).index,i=t.oxw(2);t.Q6J("styles",t.DdM(2,rt))("innerHtml",i.sanitizer.bypassSecurityTrustHtml(i.recordData[i.attributeList[e+1].name.value]),t.oJD)}}function ei(a,s){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&a){const e=t.oxw(2).index,i=t.oxw(3).index,n=t.oxw(2);t.xp6(1),t.hij("(",n.listsScope[n.attributeList[i+1].name.value][e].template?n.listsScope[n.attributeList[i+1].name.value][e].text:null,")")}}function ii(a,s){if(1&a&&(t.TgZ(0,"p"),t._uU(1,"\n                                        "),t._UZ(2,"span",19),t._uU(3,"\n                                        "),t.YNc(4,ei,2,1,"span",15),t._uU(5,"\n                                    "),t.qZA()),2&a){const e=t.oxw().index,i=t.oxw(3).index,n=t.oxw(2);t.xp6(2),t.Q6J("innerHtml",n.sanitizer.bypassSecurityTrustHtml(n.listsScope[n.attributeList[i+1].name.value][e].template?n.listsScope[n.attributeList[i+1].name.value][e].template:n.listsScope[n.attributeList[i+1].name.value][e].text),t.oJD)("autoClose",!0),t.xp6(2),t.Q6J("ngIf",n.listsScope[n.attributeList[i+1].name.value][e].template)}}function ai(a,s){if(1&a&&(t.TgZ(0,"span"),t._uU(1,"\n                                    "),t.YNc(2,ii,6,3,"p",15),t._uU(3,"\n                                "),t.qZA()),2&a){const e=s.index,i=t.oxw(3).index,n=t.oxw(2);t.xp6(2),t.Q6J("ngIf",n.listsScope[n.attributeList[i+1].name.value][e].value==n.recordData[n.attributeList[i+1].name.value])}}function ni(a,s){if(1&a&&(t.TgZ(0,"p"),t._uU(1,"\n                                "),t.YNc(2,ai,4,1,"span",18),t._uU(3,"\n                            "),t.qZA()),2&a){const e=t.oxw(2).index,i=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",i.listsScope[i.attributeList[e+1].name.value])}}function si(a,s){if(1&a&&(t.TgZ(0,"div",12),t._uU(1,"\n                        "),t.TgZ(2,"div",13),t._uU(3,"\n                            "),t.TgZ(4,"label",14),t._uU(5),t.qZA(),t._uU(6,"\n                            "),t.YNc(7,Xe,2,1,"p",15),t._uU(8,"\n                            "),t.YNc(9,ti,1,3,"p",16),t._uU(10,"\n                            "),t.YNc(11,ni,4,1,"p",15),t._uU(12,"\n                            "),t._uU(13,"\n                        "),t.qZA(),t._uU(14,"\n                    "),t.qZA()),2&a){const e=t.oxw().index,i=t.oxw(2);t.xp6(4),t.s9C("for",i.attributeList[e+1].name.value),t.xp6(1),t.hij("",i.attributeList[e+1].alias.value,":"),t.xp6(2),t.Q6J("ngIf","string"==i.attributeList[e+1].type.value||"number"==i.attributeList[e+1].type.value||"number"==i.attributeList[e+1].type.value||"user"==i.attributeList[e+1].type.value||"team"==i.attributeList[e+1].type.value||"autokey"==i.attributeList[e+1].type.value),t.xp6(2),t.Q6J("ngIf","richtext"==i.attributeList[e+1].type.value),t.xp6(2),t.Q6J("ngIf",i.attributeList[e+1].type.value.toString().includes("list"))}}const ri=function(a){return{hidden:a}};function oi(a,s){if(1&a&&(t.TgZ(0,"div",10),t._uU(1,"\n                    "),t.YNc(2,$e,15,5,"div",11),t._uU(3,"\n                    "),t.YNc(4,si,15,5,"div",11),t._uU(5,"\n                "),t.qZA()),2&a){const e=s.index,i=s.even,n=t.oxw(2);t.Q6J("ngClass",t.VKq(3,ri,!i)),t.xp6(2),t.Q6J("ngIf",i),t.xp6(2),t.Q6J("ngIf",i&&e!=n.attributeList.length-1)}}function li(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"form",6),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().onSubmit()}),t._uU(1,"\n        "),t.TgZ(2,"div",7),t._uU(3,"\n            "),t.TgZ(4,"div",8),t._uU(5,"\n                "),t.YNc(6,oi,6,5,"div",9),t._uU(7,"\n            "),t.qZA(),t._uU(8,"\n        "),t.qZA(),t._uU(9,"\n        \n    "),t.qZA()}if(2&a){const e=t.oxw();t.Q6J("formGroup",e.registerForm),t.xp6(6),t.Q6J("ngForOf",e.attributeList)}}let ci=(()=>{class a{constructor(e,i,n,r,l,p,m,f,o,v,_,u,h){this.formBuilder=e,this.route=i,this._client=n,this.dynamicobjectappServie=r,this.dialog=l,this._spinner=p,this.router=m,this.tms=f,this._auth=o,this.toastService=v,this.commonService=_,this.userService=u,this.sanitizer=h,this.registerForm=new c.cw({}),this.submitted=!1,this.title="View Record",this.listsScope={},this.usersList=[],this.teamList=[],this.dataLoaded=!1,this.loggedUser=o.getUser(),f.getTeams().then(g=>{this.teamList=g}).catch(g=>{}),u.getUsers().then(g=>{this.usersList=g}).catch(g=>{})}filterAttributes(e){var i=[],n=[];for(var r in e)"autokey"!=e[r].type.value&&"richtext"!=e[r].type.value&&(1!=e[r].isPrimaryKey.value||"true"!=e[r].isPrimaryKey.value.toString())&&i.push(e[r]),(1==e[r].isPrimaryKey.value||"true"==e[r].isPrimaryKey.value)&&(e[r].disabled=!0,i.push(e[r])),"richtext"==e[r].type.value&&n.push(e[r]);for(var r in n)i.push(n[r]);return i}ngOnInit(){this.app=this.route.snapshot.params.app,void 0!==history.state.recordData?(this.recordData=history.state.recordData,void 0!==history.state.attributes?(this.attributeList=this.filterAttributes(history.state.attributes),this.registerForm=this.formBuilder.group(this.parseAttributesToFormItems())):this.dynamicobjectappServie.getDynamicObjectAppAttributes(this.app).then(i=>{this._spinner.setSpinnerState(!1),(i=JSON.parse(i)).status?(this.attributeList=this.filterAttributes(i.data),this.registerForm=this.formBuilder.group(this.parseAttributesToFormItems()),this.dataLoaded=!0):this.openDialog({type:"alert",message:i.message},()=>{this.router.navigate([".."],{relativeTo:this.route})})}).catch(i=>{this._spinner.setSpinnerState(!1),console.log("error occurred ",i),this.openDialog({type:"alert",message:i.toString()},()=>{this.router.navigate([".."],{relativeTo:this.route})})})):this.openDialog({type:"alert",message:"No record selected!"},()=>{this.router.navigate([".."],{relativeTo:this.route})})}parseAttributesToFormItems(){var e={};for(var i in this.attributeList){var n=[],r=this.recordData[this.attributeList[i].name.value],l=[];for(var p in this.attributeList[i].validators.value)switch(this.attributeList[i].validators.value[p].element.type.value){case"required":l.push(c.kI.required),this.attributeList[i].required=!0;break;case"whitespace":case"whitspace":l.push(F.w.restrictWhiteSpace)}if(this.attributeList[i].type.value.toString().includes("list")){var m=this.attributeList[i].type.value.toString().split(":");this.commonService.getListItems(m[m.length-1],i).then(o=>{null!=o.res&&0!=o.res.length?this.listsScope[this.attributeList[o.item].name.value]=o.res:this.attributeList[o.item].required?this.openDialog({type:"alert",message:"List load failed for a mandatory field. Please contact system administrator."},()=>{this.router.navigate([".."],{relativeTo:this.route})}):this.openDialog({type:"warn",message:"List load failed for field: "+this.attributeList[o.item].alias.value+"."},null)}).catch(o=>{console.log(o),this.attributeList[o.item].required?this.openDialog({type:"alert",message:"List load failed for a mandatory field. Please contact system administrator."},()=>{this.router.navigate([".."],{relativeTo:this.route})}):this.openDialog({type:"warn",message:"List load failed for field: "+this.attributeList[o.item].alias.value+"."},null)})}this.attributeList[i].disabled&&(r={value:r,disabled:!0}),n.push(r),n.push(l),e[this.attributeList[i].name.value]=n}return e}get f(){return this.registerForm.controls}checkIfAttributeRequired(e){return!!this.attributeList[e].required&&this.attributeList[e].required}checkIsInvalid(e){return!!this.registerForm.controls[e].errors}checkIsInvalidRequired(e){return!!this.registerForm.controls[e].errors&&!!(this.registerForm.controls[e].errors||"").required}checkIsInvalidWhiteSpace(e){return!!this.registerForm.controls[e].errors&&!!(this.registerForm.controls[e].errors||"").restrictWhiteSpace}checkIsInvalidLength(e){return!!this.registerForm.controls[e].errors&&!!(this.registerForm.controls[e].errors||"").maxlength}getFormCotrolData(e){return this.registerForm.controls[e].value}onSubmit(){this.submitted=!0}openDialog(e,i){this.dialog.open(A.h,{data:e,panelClass:"app-dialog-class"}).afterClosed().toPromise().then(n=>{"function"==typeof i&&i()})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(c.qu),t.Y36(y.gz),t.Y36(T.l),t.Y36(O),t.Y36(D.uw),t.Y36(S.V),t.Y36(y.F0),t.Y36(N.U),t.Y36(w.q),t.Y36(R.k),t.Y36(q.v),t.Y36(j.K),t.Y36(et.H7))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-dynamicobjectapp-view-record"]],decls:21,vars:2,consts:[[1,"container-fluid-lg","p-3","my-3"],[1,"row"],[1,"col-xs-6"],[1,"page-title","ml-3"],["area-label","false",1,"fa","fa-th"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"row","ml-4"],[1,"col-lg-12"],["class","row p-0 ",3,"ngClass",4,"ngFor","ngForOf"],[1,"row","p-0",3,"ngClass"],["class","col-sm-6",4,"ngIf"],[1,"col-sm-6"],[1,"form-group"],[1,"bold",3,"for"],[4,"ngIf"],[3,"styles","innerHtml",4,"ngIf"],[3,"styles","innerHtml"],[4,"ngFor","ngForOf"],[3,"innerHtml","autoClose"]],template:function(e,i){1&e&&(t._uU(0,"\n"),t._uU(1,"\n"),t._UZ(2,"app-path"),t._uU(3,"\n\n"),t.TgZ(4,"div",0),t._uU(5,"\n    "),t.TgZ(6,"div",1),t._uU(7,"\n        "),t.TgZ(8,"div",2),t._uU(9,"\n            "),t.TgZ(10,"h3",3),t._uU(11,"\n                "),t._UZ(12,"i",4),t._uU(13),t._UZ(14,"hr"),t._uU(15,"\n            "),t.qZA(),t._uU(16,"\n        "),t.qZA(),t._uU(17,"\n    "),t.qZA(),t._uU(18,"\n    "),t.YNc(19,li,10,2,"form",5),t._uU(20,"\n\n\n\n"),t.qZA()),2&e&&(t.xp6(13),t.hij(" ",i.title,"\n                "),t.xp6(6),t.Q6J("ngIf",i.dataLoaded))},directives:[J.l,b.O5,c._Y,c.JL,c.sg,b.sg,b.mk],styles:[""]}),a})();var ui=d(9982),di=d(8028);function pi(a,s){if(1&a&&(t.TgZ(0,"div",7),t._uU(1,"\n                "),t._UZ(2,"app-card-small",8),t._uU(3,"\n            "),t.qZA()),2&a){const e=s.$implicit;t.xp6(2),t.Q6J("cardDanger",e.cardDanger)("cardTextClamp",e.cardTextClamp)("cardRouterLink",e.cardRouterLink)("cardTitle",e.cardTitle)("cardText",e.cardText)("cardHeight",e.cardHeight)("cardWidth",e.cardWidth)("cardIconClass",e.cardIconClass)("badgeIcon",e.badgeIcon)("cardStackIcon",e.cardStackIcon)("cardIconColor",e.cardIconColor)("cardStackIconColor",e.cardStackIconColor)}}let mi=(()=>{class a{constructor(e,i,n,r,l,p,m){this.dos=e,this.spinner=i,this.dialog=n,this.toastService=r,this._auth=l,this.router=p,this.route=m,this.isLoaded=!1,this.loggedUser=l.getUser(),this.dos.getDynamicObjects().then(o=>{this.spinner.setSpinnerState(!1),this.cardsMetaData=this.parseData(o),0==this.cardsMetaData.length&&(this.loggedUser.useToast?(this.toastService.showDanger("No applications found.",5e3),this.router.navigate(["../../tools/dash"],{relativeTo:this.route})):this.openDialog({type:"alert",message:"No applications found."},()=>{this.router.navigate(["../../tools/dash"],{relativeTo:this.route})})),this.isLoaded=!0}).catch(o=>{this.spinner.setSpinnerState(!1),this.isLoaded=!1})}ngOnInit(){}parseData(e){var i=[];for(var n in e)e[n].status&&i.push({cardTitle:e[n].description,cardIconClass:"fa fa-folder-o",cardRouterLink:["../../dynamicapps/app/"+e[n].name]});return i}openDialog(e,i){this.dialog.open(A.h,{data:e,panelClass:"app-dialog-class"}).afterClosed().toPromise().then(n=>{"function"==typeof i&&i(n)})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(ui.S),t.Y36(S.V),t.Y36(D.uw),t.Y36(R.k),t.Y36(w.q),t.Y36(y.F0),t.Y36(y.gz))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-dynamicobjects-home"]],decls:22,vars:1,consts:[[1,"container-fluid","mt-3"],[1,"row","p-3"],[1,"page-title","h3"],["area-label","false",1,"fa","fa-folder-o"],[1,"ml-2"],[1,"row","ml-5"],["class","card-container column p-2",4,"ngFor","ngForOf"],[1,"card-container","column","p-2"],[3,"cardDanger","cardTextClamp","cardRouterLink","cardTitle","cardText","cardHeight","cardWidth","cardIconClass","badgeIcon","cardStackIcon","cardIconColor","cardStackIconColor"]],template:function(e,i){1&e&&(t._UZ(0,"app-path"),t._uU(1,"\n\n"),t._uU(2,"\n"),t.TgZ(3,"div",0),t._uU(4,"\n    "),t.TgZ(5,"div",1),t._uU(6,"\n\n        "),t.TgZ(7,"h1",2),t._UZ(8,"i",3),t._uU(9," Applications\n            "),t._UZ(10,"hr"),t._uU(11,"\n        "),t.qZA(),t._uU(12,"\n    "),t.qZA(),t._uU(13,"\n    "),t.TgZ(14,"div",4),t._uU(15,"\n        "),t.TgZ(16,"div",5),t._uU(17,"\n            "),t.YNc(18,pi,4,12,"div",6),t._uU(19,"\n        "),t.qZA(),t._uU(20,"\n    "),t.qZA(),t._uU(21,"\n\n\n"),t.qZA()),2&e&&(t.xp6(18),t.Q6J("ngForOf",i.cardsMetaData))},directives:[J.l,b.sg,di.w],styles:["",".center-block[_ngcontent-%COMP%] {\n        margin-left: auto;\n        margin-right: auto;\n        display: block;\n    }\n    \n    .link[_ngcontent-%COMP%] {\n        cursor: pointer;\n    }\n    \n    .only-verical-scroller[_ngcontent-%COMP%] {\n        overflow-x: hidden !important;\n    }"]}),a})();var _i=d(5866),hi=d(3708);const vi=[{path:"",component:(()=>{class a{constructor(e){this.routeHandle=e}ngOnInit(){}getRouterOutletState(e){return e&&e.activatedRouteData&&e.activatedRouteData.animation}onRouterOutletActivate(e){this.routeHandle.setUserRouterOutlet(e)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(hi.f))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-dynamicobjects-view"]],decls:5,vars:1,consts:[[2,"height","90vh !important","width","auto","overflow-x","hidden !important","overflow-y","auto"],["o","outlet"]],template:function(e,i){if(1&e&&(t.TgZ(0,"main",0),t._uU(1,"\n    "),t._UZ(2,"router-outlet",null,1),t._uU(4,"\n"),t.qZA()),2&e){const n=t.MAs(3);t.Q6J("@routeAnimations",i.getRouterOutletState(n))}},directives:[y.lC],styles:[""],data:{animation:[_i.LA]}}),a})(),children:[{path:"dash",component:mi,data:{animation:"vmm",title:"Custom Applications"}},{path:"app/:app",component:ht,data:{animation:"vmm",title:"Application Home"}},{path:"app/:app/add",component:Kt,data:{animation:"vmm",title:"Add Record"}},{path:"app/:app/edit",component:Ge,data:{animation:"vmm",title:"Edit Record"}},{path:"app/:app/view",component:ci,data:{animation:"vmm",title:"View Record"}},{path:"app/:app/charts",component:me,data:{animation:"vmm",title:"View Record"}},{path:"",redirectTo:"dash",pathMatch:"full"},{path:"app",redirectTo:"dash",pathMatch:"full"},{path:"**",component:d(960).R,data:{animation:"notFound",title:"404-Page Not Found!"}}]}];let bi=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[y.Bz.forChild(vi)],y.Bz]}),a})();var xi=d(4027),yi=d(7983),Ci=d(310),Li=d(6140),Ai=d(577),Ui=d(2831);let Ti=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[b.ez,B.u,bi,b.ez,Ui.m,Ai.Z,xi.q,c.UX,c.u5,U.JF,Ci.d,yi._,L.NA,L.pT,B.u,Li.x,z.Ypc.forRoot({enableAutoResize:!0,autoResize:{container:"#container",rightPadding:10}}),P.A0]]}),a})()}}]);