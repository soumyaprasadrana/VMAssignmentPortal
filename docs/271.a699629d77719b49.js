"use strict";(self.webpackChunkVMPORTAL=self.webpackChunkVMPORTAL||[]).push([[271],{5271:(j,S,a)=>{a.r(S),a.d(S,{SnapshotsModule:()=>H});var v=a(9808),m=a(8555),T=a(960),y=a(5866),e=a(5e3),b=a(3708);let F=(()=>{class i{constructor(t){this.routeHandle=t}ngOnInit(){}getRouterOutletState(t){return t&&t.activatedRouteData&&t.activatedRouteData.animation}onRouterOutletActivate(t){this.routeHandle.setUserRouterOutlet(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b.f))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-snapshots-view"]],decls:5,vars:1,consts:[[2,"height","90vh !important","width","auto","overflow-x","hidden !important","overflow-y","auto"],["o","outlet"]],template:function(t,s){if(1&t&&(e.TgZ(0,"main",0),e._uU(1,"\n    "),e._UZ(2,"router-outlet",null,1),e._uU(4,"\n"),e.qZA()),2&t){const o=e.MAs(3);e.Q6J("@routeAnimations",s.getRouterOutletState(o))}},directives:[m.lC],styles:[""],data:{animation:[y.QS]}}),i})();var A=a(2919),w=a(8364),p=a(8479),D=a(6916),G=a(8235),O=a(3438),R=a(2715),I=a(7440),U=a(8341),L=a(5174),E=a(287),M=a(7160),C=a(4818);function z(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"angular-slickgrid",4),e.NdJ("onAngularGridCreated",function(o){return e.CHM(t),e.oxw().angularGridReady(o.detail)})("onGridStateChanged",function(o){return e.CHM(t),e.oxw().gridStateChanged(o.detail)})("onBeforeGridDestroy",function(){return e.CHM(t),e.oxw().saveCurrentGridState()}),e._uU(1,"\n    "),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("columnDefinitions",t.columnDef)("gridOptions",t.gridOptions)("dataset",t.gridDataset)}}function P(i,l){1&i&&(e.TgZ(0,"div",5),e._uU(1,"\n\n        "),e.TgZ(2,"div",6),e._uU(3,"\n\n            Loading...\n\n\n        "),e.qZA(),e._uU(4,"\n\n    "),e.qZA())}function B(i,l){1&i&&(e.TgZ(0,"div"),e._uU(1,"Data load failed please contact system administrator."),e.qZA())}const Z=[{path:"",component:F,children:[{path:"dash",component:A.C,data:{animation:"tools",title:"Snapshots"}},{path:"grid",component:(()=>{class i{constructor(t,s,o,n,r,g,u,Q){this.route=t,this.router=s,this.vms=o,this.spinner=n,this.dialog=r,this._client=g,this.auth=u,this.toastService=Q,this.columnDef=[],this.isLoaded=!1,this.isDataloadFailed=!1,this.editQueue=[],this.editedItems={},this.isGridEditable=!0,this.isCompositeDisabled=!1,this.isMassSelectionDisabled=!0,this.isGroupByChildAdded=!1,this.properties={},this.userList=[],this.excelExportService=new w.U,this.customTooltipService=new O.E,this.isDeviceMobilReset=!1,this.isSnapshotCount=!1,this.loggedUser=u.getUser(),this.spinner.setSpinnerState(!0),void 0!==history.state.action?"search"==history.state.action?(this.spinner.setSpinnerState(!1),this.openDialogInput({title:"Search Snapshots",label:"Keyword",placeholder:"Enter keyword",isText:!0,closeCallback:()=>{this.router.navigate([".."],{relativeTo:this.route})}},h=>{this.spinner.setSpinnerState(!0),this.vms.searchSnapshots(h.dataCtrl).then(c=>{this.spinner.setSpinnerState(!1),console.log("inside promise.then -< setting gridDataSet",c),this.gridDataset=c,console.log(c),this.defineGrid(),this.isLoaded=!0}).catch(c=>{this.spinner.setSpinnerState(!1),console.log("error occurred ",c);try{c=JSON.parse(c)}catch(X){}this.loggedUser.useToast?(this.toastService.showDanger(c.message,5e3),this.router.navigate([".."],{relativeTo:this.route})):this.openDialog({type:"alert",message:c.message},()=>{this.router.navigate([".."],{relativeTo:this.route})}),this.isLoaded=!1})})):"all"==history.state.action?this.vms.getAllSnapshots().then(h=>{this.spinner.setSpinnerState(!1),console.log("inside promise.then -< setting gridDataSet",h),this.gridDataset=h,console.log(h),this.defineGrid(),this.isLoaded=!0}).catch(h=>{this.spinner.setSpinnerState(!1),console.log("error occurred ",h);try{h=JSON.parse(h)}catch(d){}this.loggedUser.useToast?(this.toastService.showDanger(h.message,5e3),this.router.navigate([".."],{relativeTo:this.route})):this.openDialog({type:"alert",message:h.message},()=>{this.router.navigate([".."],{relativeTo:this.route})}),this.isLoaded=!1}):"count"==history.state.action&&this.vms.getAllSnapshotsCount().then(d=>{this.spinner.setSpinnerState(!1),console.log("inside promise.then -< setting gridDataSet",d),this.gridDataset=d,console.log(d),this.isSnapshotCount=!0,this.defineGrid(),this.isLoaded=!0}).catch(d=>{this.spinner.setSpinnerState(!1),console.log("error occurred ",d);try{d=JSON.parse(d)}catch(c){}this.loggedUser.useToast?(this.toastService.showDanger(d.message,5e3),this.router.navigate([".."],{relativeTo:this.route})):this.openDialog({type:"alert",message:d.message},()=>{this.router.navigate([".."],{relativeTo:this.route})}),this.isLoaded=!1}):(this.spinner.setSpinnerState(!1),this.loggedUser.useToast?(this.toastService.showDanger("No action selected!",5e3),this.router.navigate([".."],{relativeTo:this.route})):this.openDialog({type:"alert",message:"No action selected!"},()=>{this.router.navigate([".."],{relativeTo:this.route})}))}angularGridReady(t){this.angularGrid=t,this.gridObj=t.slickGrid,this.dataviewObj=t.dataView,this.gridService=t.gridService,this.angularGrid.resizerService.resizeGrid(100)}ngOnDestroy(){}ngOnInit(){}renderUnsavedStylingOnAllVisibleCells(){for(const t of this.editQueue)if(t){const{item:s,columns:o,editCommand:n}=t;Array.isArray(o)&&o.forEach(r=>{this.renderUnsavedCellStyling(s,r,n)})}}renderUnsavedCellStyling(t,s,o){if(o&&t&&s){const n=this.angularGrid.dataView.getRowByItem(t);n>=0&&this.angularGrid.slickGrid.setCellCssStyles(`unsaved_highlight_${[s.id]}${n}`,{[n]:{[s.id]:"unsaved-editable-field"}})}}checkIsIncludes(t,s){for(var o in t)if(t[o]==s)return!0;return!1}addTechnote(){this.router.navigate(["/portal/home/tools/technotes/add"])}openDialog(t,s){this.dialog.open(G.h,{data:t,panelClass:"app-dialog-class"}).afterClosed().toPromise().then(o=>{"function"==typeof s&&s(o)})}openDialogInput(t,s){this.dialog.open(D.k,{data:t,panelClass:"app-dialog-class",width:"500px"}).afterClosed().toPromise().then(o=>{"function"==typeof s&&""!=o&&null!=o&&s(o)})}clearGridStateFromLocalStorage(){}saveCurrentGridState(){}defineGrid(){this.spinner.setSpinnerState(!0);const t=(o,n,r,g,u)=>(void 0===r&&(r=""),{text:`<div style='text-align:center;width:auto;color:#000;' ><span  class="badge" style='text-align:center'>${r}</span></div>`,toolTip:r}),s=(o,n,r,g,u)=>(void 0===r&&(r=""),"Available"==u.status||"true"==u.status||1==u.status?{text:"<div style='text-align:center;width:auto;'> <span style='text-align:center;padding:5px;' class='badge badge-success'>Available</span></div>",toolTip:r}:"Occupied"==u.status||"false"==u.status||0==u.status?{text:"<div style='text-align:center;width:auto;'><span style='text-align:center;padding:5px;' class='badge badge-secondary'>Occupied</span></div>",toolTip:r}:{text:`<div style='text-align:center;width:auto;'><span style='text-align:center'>${r}</span></div>`,toolTip:r});this.columnDef=this.isSnapshotCount?[{id:"ip",name:"IP Address",field:"ip",sortable:!0,filterable:!0,formatter:t,filter:{model:p.x$p.compoundInputText},headerCssClass:"gridRow",customTooltip:{hideArrow:!0,headerFormatter:this.headerFormatter.bind(this)}},{id:"hostname",name:"Hostname",field:"hostname",sortable:!0,filterable:!0,formatter:t,filter:{model:p.x$p.compoundInputText},customTooltip:{hideArrow:!0,headerFormatter:this.headerFormatter.bind(this)}},{id:"os",name:"OS",field:"os",sortable:!0,filterable:!0,formatter:t,customTooltip:{hideArrow:!0,headerFormatter:this.headerFormatter.bind(this)}},{id:"count",name:"Count",field:"count",sortable:!0,filterable:!0,formatter:t,customTooltip:{hideArrow:!0,headerFormatter:this.headerFormatter.bind(this)}},{id:"status",name:"Status",field:"status",sortable:!0,filterable:!0,formatter:s,customTooltip:{hideArrow:!0,headerFormatter:this.headerFormatter.bind(this)}},{id:"owner",name:"Assignee",field:"owner",sortable:!0,filterable:!0,formatter:t,customTooltip:{hideArrow:!0,headerFormatter:this.headerFormatter.bind(this)}}]:[{id:"name",name:"Name",field:"name",sortable:!0,filterable:!0,formatter:t,filter:{model:p.x$p.compoundInputText},headerCssClass:"gridRow",customTooltip:{hideArrow:!0,headerFormatter:this.headerFormatter.bind(this)}},{id:"description",name:"Description",field:"description",sortable:!0,filterable:!0,formatter:t,filter:{model:p.x$p.compoundInputText},headerCssClass:"gridRow",customTooltip:{hideArrow:!0,headerFormatter:this.headerFormatter.bind(this)}},{id:"ip",name:"IP Address",field:"ip",sortable:!0,filterable:!0,formatter:t,filter:{model:p.x$p.compoundInputText},headerCssClass:"gridRow",customTooltip:{hideArrow:!0,headerFormatter:this.headerFormatter.bind(this)}},{id:"hostname",name:"Hostname",field:"hostname",sortable:!0,filterable:!0,formatter:t,filter:{model:p.x$p.compoundInputText},customTooltip:{hideArrow:!0,headerFormatter:this.headerFormatter.bind(this)}},{id:"os",name:"OS",field:"os",sortable:!0,filterable:!0,formatter:t,customTooltip:{hideArrow:!0,headerFormatter:this.headerFormatter.bind(this)}},{id:"status",name:"Status",field:"status",sortable:!0,filterable:!0,formatter:s,customTooltip:{hideArrow:!0,headerFormatter:this.headerFormatter.bind(this)}},{id:"owner",name:"Assignee",field:"owner",sortable:!0,filterable:!0,formatter:t,customTooltip:{hideArrow:!0,headerFormatter:this.headerFormatter.bind(this)}}],console.log("this.defaultPageSizeList",this.defaultPageSizeList),this.gridOptions={gridHeight:"95%",autoResize:{container:"#snapshots-grid-container",applyResizeToContainer:!0,rightPadding:0},enableSorting:!0,enableAutoResize:!0,enableFiltering:!0,enablePagination:!0,pagination:{pageSizes:this.defaultPageSizeList?this.defaultPageSizeList:[50,100,200,400,1e3,1e4],pageSize:25},enableExcelCopyBuffer:!0,enableExcelExport:!0,enableCheckboxSelector:!1,enableRowSelection:!1,multiSelect:!1,registerExternalResources:[this.customTooltipService,this.excelExportService],enableCellMenu:!0,gridMenu:{hideExportExcelCommand:!0,menuUsabilityOverride:o=>!0,iconCssClass:"fa fa-bars",hideForceFitButton:!0,hideSyncResizeButton:!0,hideToggleFilterCommand:!0,menuWidth:17,resizeOnShowHeaderRow:!0,commandItems:[{iconCssClass:"slick-gridmenu-icon fa fa-file-excel-o text-success",title:"Export to Excel",disabled:!1,command:"exportExcel",textCssClass:"title",positionOrder:1}],onCommand:(o,n)=>{"resetGrid"===n.command?this.clearGridStateFromLocalStorage():"exportExcel"===n.command&&this.excelExportService.exportToExcel({filename:"Snapshot_List_"+(new Date).toTimeString().replace(" ","_"),format:p.Tv5.xlsx})},onColumnsChanged:(o,n)=>{}},enableAutoTooltip:!0},this.spinner.setSpinnerState(!1)}gridStateChanged(t){}headerFormatter(t,s,o,n,r,g){return""}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.gz),e.Y36(m.F0),e.Y36(R._),e.Y36(I.V),e.Y36(U.uw),e.Y36(L.l),e.Y36(E.q),e.Y36(M.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-snapshots-grid"]],decls:8,vars:3,consts:[["id","snapshots-grid-container"],["gridId","gridSnapshot",3,"columnDefinitions","gridOptions","dataset","onAngularGridCreated","onGridStateChanged","onBeforeGridDestroy",4,"ngIf"],["class","h-100 w-100 d-table",4,"ngIf"],[4,"ngIf"],["gridId","gridSnapshot",3,"columnDefinitions","gridOptions","dataset","onAngularGridCreated","onGridStateChanged","onBeforeGridDestroy"],[1,"h-100","w-100","d-table"],[1,"h-100","w-100","align-middle","d-table-cell","display-4","text-primary","text-center"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e._uU(1,"\n\n    "),e.YNc(2,z,2,3,"angular-slickgrid",1),e._uU(3,"\n    "),e.YNc(4,P,5,0,"div",2),e._uU(5,"\n    "),e.YNc(6,B,2,0,"div",3),e._uU(7,"\n"),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",s.isLoaded),e.xp6(2),e.Q6J("ngIf",!s.isLoaded&&!s.isDataloadFailed),e.xp6(2),e.Q6J("ngIf",!s.isLoaded&&s.isDataloadFailed))},directives:[v.O5,C.PW8],styles:[".fa-check-circle[_ngcontent-%COMP%]{color:#5cb85c}.fa-times-circle[_ngcontent-%COMP%]{color:#f90000}"]}),i})(),data:{animation:"tools",title:"Snapshots Data"}},{path:"",redirectTo:"dash",pathMatch:"full"},{path:"**",component:T.R,data:{animation:"notFound",title:"404-Page Not Found"}}]}];let J=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[m.Bz.forChild(Z)],m.Bz]}),i})();var N=a(1008),V=a(2831),x=a(3075),$=a(4027);let H=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[v.ez,J,N.u,V.m,x.u5,x.UX,$.q,C.Ypc.forRoot({enableAutoResize:!0,autoResize:{container:"#container",rightPadding:10}})]]}),i})()}}]);