"use strict";(self.webpackChunkVMPORTAL=self.webpackChunkVMPORTAL||[]).push([[131],{131:(zt,P,p)=>{p.r(P),p.d(P,{ChartsModule:()=>Xt});var C=p(9808),E=p(4027),Y=p(1008),b=p(3724),O=p(8555),B=p(5866),t=p(5e3),F=p(3708);let Q=(()=>{class o{constructor(e){this.routeHandle=e}ngOnInit(){}getRouterOutletState(e){return e&&e.activatedRouteData&&e.activatedRouteData.animation}onRouterOutletActivate(e){this.routeHandle.setVMMRouterOutlet(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(F.f))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-charts-view"]],decls:5,vars:1,consts:[[1,"h-100"],["o","outlet"]],template:function(e,s){if(1&e&&(t.TgZ(0,"main",0),t._uU(1,"\n    "),t._UZ(2,"router-outlet",null,1),t._uU(4,"\n"),t.qZA()),2&e){const i=t.MAs(3);t.Q6J("@routeAnimations",s.getRouterOutletState(i))}},directives:[O.lC],styles:[""],data:{animation:[B.Kz]}}),o})();var H=p(8235),G=p(6916),h=(()=>{return(o=h||(h={}))[o.RO_TOP=0]="RO_TOP",o[o.RO_BOTTOM=1]="RO_BOTTOM",o[o.RO_RIGHT=2]="RO_RIGHT",o[o.RO_LEFT=3]="RO_LEFT",h;var o})(),g=(()=>{return(o=g||(g={}))[o.NJ_TOP=0]="NJ_TOP",o[o.NJ_CENTER=1]="NJ_CENTER",o[o.NJ_BOTTOM=2]="NJ_BOTTOM",g;var o})(),x=(()=>{return(o=x||(x={}))[o.SM_DSC=0]="SM_DSC",o[o.SM_META=1]="SM_META",o[o.SM_BOTH=2]="SM_BOTH",x;var o})(),U=(()=>{return(o=U||(U={}))[o.SL_MULTIPLE=0]="SL_MULTIPLE",o[o.SL_SINGLE=1]="SL_SINGLE",o[o.SL_NONE=2]="SL_NONE",U;var o})();class R{constructor(n,e,s,i,a,r,l,d,c){this.siblingIndex=0,this.dbIndex=0,this.XPosition=0,this.YPosition=0,this.prelim=0,this.modifier=0,this.isCollapsed=!1,this.canCollapse=!1,this.isSelected=!1,this.id=n,this.pid=e,this.dsc=s,this.w=i,this.h=a,this.c=r,this.bc=l,this.linkColor=d,this.data=c,this.siblingIndex=0,this.dbIndex=0,this.XPosition=0,this.YPosition=0,this.prelim=0,this.modifier=0,this.leftNeighbor=null,this.rightNeighbor=null,this.nodeParent=null,this.nodeChildren=[],this.isCollapsed=!1,this.canCollapse=!1,this.isSelected=!1}_getLevel(){return-1==this.nodeParent.id?0:this.nodeParent._getLevel()+1}_isAncestorOrNodeCollapsed(){return!!(this.nodeParent.isCollapsed||-1==this.nodeParent.id&&this.isCollapsed||this.isCollapsed)||-1!=this.nodeParent.id&&this.nodeParent._isAncestorCollapsed()}_isAncestorCollapsed(){return!!this.nodeParent.isCollapsed||-1!=this.nodeParent.id&&this.nodeParent._isAncestorCollapsed()}_setAncestorsExpanded(){if(-1!=this.nodeParent.id)return this.nodeParent.isCollapsed=!1,this.nodeParent._setAncestorsExpanded()}_getChildrenCount(){return this.isCollapsed||null==this.nodeChildren?0:this.nodeChildren.length}_getLeftSibling(){return null!=this.leftNeighbor&&this.leftNeighbor.nodeParent==this.nodeParent?this.leftNeighbor:null}_getRightSibling(){return null!=this.rightNeighbor&&this.rightNeighbor.nodeParent==this.nodeParent?this.rightNeighbor:null}_getChildAt(n){return this.nodeChildren[n]}_getChildrenCenter(n){const e=this._getFirstChild(),s=this._getLastChild();return e.prelim+(s.prelim-e.prelim+n._getNodeSize(s))/2}_getFirstChild(){return this._getChildAt(0)}_getLastChild(){return this._getChildAt(this._getChildrenCount()-1)}_drawChildrenLinks(n){let e=[],s=0,i=0,a=0,r=0,l=0,d=0,c=0,_=0,u=null;switch(n.config.iRootOrientation){case h.RO_TOP:s=this.XPosition+this.w/2,i=this.YPosition+this.h;break;case h.RO_BOTTOM:s=this.XPosition+this.w/2,i=this.YPosition;break;case h.RO_RIGHT:s=this.XPosition,i=this.YPosition+this.h/2;break;case h.RO_LEFT:s=this.XPosition+this.w,i=this.YPosition+this.h/2}for(let m=0;m<this.nodeChildren.length;m++){switch(u=this.nodeChildren[m],n.config.iRootOrientation){case h.RO_TOP:switch(c=l=u.XPosition+u.w/2,_=u.YPosition,a=s,n.config.iNodeJustification){case g.NJ_TOP:r=d=_-n.config.iLevelSeparation/2;break;case g.NJ_BOTTOM:r=d=i+n.config.iLevelSeparation/2;break;case g.NJ_CENTER:r=d=i+(_-i)/2}break;case h.RO_BOTTOM:switch(c=l=u.XPosition+u.w/2,_=u.YPosition+u.h,a=s,n.config.iNodeJustification){case g.NJ_TOP:r=d=_+n.config.iLevelSeparation/2;break;case g.NJ_BOTTOM:r=d=i-n.config.iLevelSeparation/2;break;case g.NJ_CENTER:r=d=_+(i-_)/2}break;case h.RO_RIGHT:switch(c=u.XPosition+u.w,_=d=u.YPosition+u.h/2,r=i,n.config.iNodeJustification){case g.NJ_TOP:a=l=c+n.config.iLevelSeparation/2;break;case g.NJ_BOTTOM:a=l=s-n.config.iLevelSeparation/2;break;case g.NJ_CENTER:a=l=c+(s-c)/2}break;case h.RO_LEFT:switch(c=u.XPosition,_=d=u.YPosition+u.h/2,r=i,n.config.iNodeJustification){case g.NJ_TOP:a=l=c-n.config.iLevelSeparation/2;break;case g.NJ_BOTTOM:a=l=s+n.config.iLevelSeparation/2;break;case g.NJ_CENTER:a=l=s+(c-s)/2}}switch(n.config.linkType){case"M":e.push("M"+s+" "+i+" L"+a+" "+r+" L"+l+" "+d+" L"+c+" "+_);break;case"B":e.push("M"+s+" "+i+" C"+a+" "+r+" "+l+" "+d+" "+c+" "+_);break;case"L":e.push("M"+s+" "+i+" L"+c+" "+_)}}return e.join("")}}class y{constructor(){this.version="1.1",this.canvasoffsetTop=0,this.canvasoffsetLeft=0,this.maxLevelHeight=[],this.previousLevelNode=[],this.rootYOffset=0,this.rootXOffset=0,this.nDatabaseNodes=[],this.mapIDs={},this.iSelectedNode=-1,this.iLastSearch=0,this.width=0,this.height=0,this.add=(n,e,s,i,a,r,l,d,c)=>{const _=i||this.config.defaultNodeWidth,u=a||this.config.defaultNodeHeight,m=r||this.config.nodeColor,T=l||this.config.nodeBorderColor,N=void 0!==c?c:"";let v=null;if(-1==e)v=this.root;else for(let w=0;w<this.nDatabaseNodes.length;w++)if(this.nDatabaseNodes[w].id==e){v=this.nDatabaseNodes[w];break}const A=new R(n,e,s,_,u,m,T,d,N);A.nodeParent=v,v.canCollapse=!0;const k=this.nDatabaseNodes.length;A.dbIndex=this.mapIDs[n]=k,this.nDatabaseNodes[k]=A,A.siblingIndex=a=v.nodeChildren.length,v.nodeChildren[a]=A},this.config={iMaxDepth:100,iLevelSeparation:40,iSiblingSeparation:40,iSubtreeSeparation:80,iRootOrientation:h.RO_TOP,iNodeJustification:g.NJ_TOP,topXAdjustment:0,topYAdjustment:0,linkType:"M",nodeColor:"#333",nodeBorderColor:"white",nodeSelColor:"#FFFFCC",useTarget:!0,searchMode:x.SM_DSC,selectMode:U.SL_MULTIPLE,defaultNodeWidth:80,defaultNodeHeight:40},this.version="1.1",this.canvasoffsetTop=0,this.canvasoffsetLeft=0,this.maxLevelHeight=[],this.maxLevelWidth=[],this.previousLevelNode=[],this.rootYOffset=0,this.rootXOffset=0,this.nDatabaseNodes=[],this.mapIDs={},this.root=new R(-1,null,null,2,2,null,null,null,null),this.iSelectedNode=-1,this.iLastSearch=0}_firstWalk(n,e,s){var i=null;if(e.XPosition=0,e.YPosition=0,e.prelim=0,e.modifier=0,e.leftNeighbor=null,e.rightNeighbor=null,n._setLevelHeight(e,s),n._setLevelWidth(e,s),n._setNeighbors(e,s),0==e._getChildrenCount()||s==n.config.iMaxDepth)i=e._getLeftSibling(),e.prelim=null!=i?i.prelim+n._getNodeSize(i)+n.config.iSiblingSeparation:0;else{const a=e._getChildrenCount();for(let l=0;l<a;l++){const d=e._getChildAt(l);this._firstWalk(n,d,s+1)}let r=e._getChildrenCenter(n);r-=n._getNodeSize(e)/2,null!=(i=e._getLeftSibling())?(e.prelim=i.prelim+n._getNodeSize(i)+n.config.iSiblingSeparation,e.modifier=e.prelim-r,this._apportion(n,e,s)):e.prelim=r}}_apportion(n,e,s){let i=e._getFirstChild(),a=i.leftNeighbor,r=1;for(let l=n.config.iMaxDepth-s;null!=i&&null!=a&&r<=l;){let d=0,c=0,_=i,u=a;for(let T=0;T<r;T++)_=_.nodeParent,u=u.nodeParent,d+=_.modifier,c+=u.modifier;let m=a.prelim+c+n._getNodeSize(a)+n.config.iSubtreeSeparation-(i.prelim+d);if(m>0){let T=e,N=0;for(;null!=T&&T!=u;T=T._getLeftSibling())N++;if(null!=T){let v=e,A=m/N;for(;v!=u;v=v._getLeftSibling())v.prelim+=m,v.modifier+=m,m-=A}}r++,i=0==i._getChildrenCount()?n._getLeftmost(e,0,r):i._getFirstChild(),null!=i&&(a=i.leftNeighbor)}}_secondWalk(n,e,s,i,a){if(s<=n.config.iMaxDepth){let r=n.rootXOffset+e.prelim+i,l=n.rootYOffset+a,d=0,c=0,_=!1;switch(n.config.iRootOrientation){case h.RO_TOP:case h.RO_BOTTOM:d=n.maxLevelHeight[s],c=e.h;break;case h.RO_RIGHT:case h.RO_LEFT:d=n.maxLevelWidth[s],_=!0,c=e.w}switch(n.config.iNodeJustification){case g.NJ_TOP:e.XPosition=r,e.YPosition=l;break;case g.NJ_CENTER:e.XPosition=r,e.YPosition=l+(d-c)/2;break;case g.NJ_BOTTOM:e.XPosition=r,e.YPosition=l+d-c}if(_){let m=e.XPosition;e.XPosition=e.YPosition,e.YPosition=m}switch(n.config.iRootOrientation){case h.RO_BOTTOM:e.YPosition=-e.YPosition-c;break;case h.RO_RIGHT:e.XPosition=-e.XPosition-c}0!=e._getChildrenCount()&&this._secondWalk(n,e._getFirstChild(),s+1,i+e.modifier,a+d+n.config.iLevelSeparation);const u=e._getRightSibling();null!=u&&this._secondWalk(n,u,s,i,a)}}_positionTree(){switch(this.maxLevelHeight=[],this.maxLevelWidth=[],this.previousLevelNode=[],this._firstWalk(this,this.root,0),this.config.iRootOrientation){case h.RO_TOP:case h.RO_LEFT:case h.RO_BOTTOM:case h.RO_RIGHT:this.rootXOffset=this.config.topXAdjustment+this.root.XPosition,this.rootYOffset=this.config.topYAdjustment+this.root.YPosition}this._secondWalk(this,this.root,0,0,0)}_setLevelHeight(n,e){null==this.maxLevelHeight[e]&&(this.maxLevelHeight[e]=0),this.maxLevelHeight[e]<n.h&&(this.maxLevelHeight[e]=n.h)}_setLevelWidth(n,e){null==this.maxLevelWidth[e]&&(this.maxLevelWidth[e]=0),this.maxLevelWidth[e]<n.w&&(this.maxLevelWidth[e]=n.w)}_setNeighbors(n,e){n.leftNeighbor=this.previousLevelNode[e],null!=n.leftNeighbor&&(n.leftNeighbor.rightNeighbor=n),this.previousLevelNode[e]=n}_getNodeSize(n){switch(this.config.iRootOrientation){case h.RO_TOP:case h.RO_BOTTOM:return n.w;case h.RO_RIGHT:case h.RO_LEFT:return n.h}return 0}_getLeftmost(n,e,s){if(e>=s)return n;if(0==n._getChildrenCount())return null;const i=n._getChildrenCount();for(let a=0;a<i;a++){const r=n._getChildAt(a),l=this._getLeftmost(r,e+1,s);if(null!=l)return l}return null}_selectNodeInt(n,e){this.config.selectMode==U.SL_SINGLE&&(this.iSelectedNode!=n&&-1!=this.iSelectedNode&&(this.nDatabaseNodes[this.iSelectedNode].isSelected=!1),this.iSelectedNode=this.nDatabaseNodes[n].isSelected&&e?-1:n),this.nDatabaseNodes[n].isSelected=!e||!this.nDatabaseNodes[n].isSelected}_collapseAllInt(n){let e=null;for(let s=0;s<this.nDatabaseNodes.length;s++)e=this.nDatabaseNodes[s],e.canCollapse&&(e.isCollapsed=n);this.UpdateTree()}_selectAllInt(n){let e=null;for(let s=0;s<this.nDatabaseNodes.length;s++)e=this.nDatabaseNodes[s],e.isSelected=n;this.iSelectedNode=-1,this.UpdateTree()}UpdateTree(){this._positionTree(),this.width=this.config.iRootOrientation==h.RO_RIGHT?Math.max(...this.nDatabaseNodes.map(n=>-n.XPosition+n.w)):Math.max(...this.nDatabaseNodes.map(n=>n.XPosition+n.w)),this.height=this.config.iRootOrientation==h.RO_BOTTOM?Math.max(...this.nDatabaseNodes.map(n=>-n.YPosition+n.h)):Math.max(...this.nDatabaseNodes.map(n=>n.YPosition+n.h)),this.config.iRootOrientation==h.RO_BOTTOM&&this.nDatabaseNodes.forEach(n=>{n.YPosition=n.YPosition+this.height}),this.config.iRootOrientation==h.RO_RIGHT&&this.nDatabaseNodes.forEach(n=>{n.XPosition=n.XPosition+this.width})}searchNodes(n){let e=null;const s=this.config.searchMode,i=this.config.selectMode==U.SL_SINGLE;if(void 0===n||""==n)return;let a=!1,r=i?this.iLastSearch:0;for(r==this.nDatabaseNodes.length&&(r=this.iLastSearch=0),n=n.toLocaleUpperCase();r<this.nDatabaseNodes.length;r++)if(e=this.nDatabaseNodes[r],-1!=e.dsc.toLocaleUpperCase().indexOf(n)&&(s==x.SM_DSC||s==x.SM_BOTH)&&(e._setAncestorsExpanded(),this._selectNodeInt(e.dbIndex,!1),a=!0),-1!=e.meta.toLocaleUpperCase().indexOf(n)&&(s==x.SM_META||s==x.SM_BOTH)&&(e._setAncestorsExpanded(),this._selectNodeInt(e.dbIndex,!1),a=!0),i&&a){this.iLastSearch=r+1;break}this.UpdateTree()}selectAll(){this.config.selectMode==U.SL_MULTIPLE&&this._selectAllInt(!0)}unselectAll(){this._selectAllInt(!1)}collapseAll(){this._collapseAllInt(!0)}expandAll(){this._collapseAllInt(!1)}collapseNode(n,e){const s=this.mapIDs[n];this.nDatabaseNodes[s].isCollapsed=!this.nDatabaseNodes[s].isCollapsed,e&&this.UpdateTree()}selectNode(n,e){this._selectNodeInt(this.mapIDs[n],!0),e&&this.UpdateTree()}setNodeTitle(n,e,s){this.nDatabaseNodes[this.mapIDs[n]].dsc=e,s&&this.UpdateTree()}setNodeMetadata(n,e,s){this.nDatabaseNodes[this.mapIDs[n]].meta=e,s&&this.UpdateTree()}setNodeColors(n,e,s,i){const a=this.mapIDs[n];e&&(this.nDatabaseNodes[a].c=e),s&&(this.nDatabaseNodes[a].bc=s),i&&this.UpdateTree()}getSelectedNodes(){let n=null;const e=[];let s=null;for(let i=0;i<this.nDatabaseNodes.length;i++)n=this.nDatabaseNodes[i],n.isSelected&&(s={id:n.id,dsc:n.dsc,meta:n.meta},e[e.length]=s);return e}}var V=p(2715),I=p(7440),f=p(3075),X=p(8341),z=p(287),W=p(7160),$=p(5174),J=p(3176),j=p(5226);function K(o,n){if(1&o&&(t.O4$(),t.TgZ(0,"path"),t._uU(1,"\n        "),t.qZA()),2&o){const e=n.$implicit,s=t.oxw(2);t.uIk("stroke",e.linkColor||null)("d",e._isAncestorOrNodeCollapsed()?null:e._drawChildrenLinks(s.tree))}}function tt(o,n){1&o&&t.GkF(0)}const et=function(o,n,e,s,i,a){return{left:o,top:n,width:e,height:s,"background-color":i,color:a}},it=function(o,n){return{$implicit:o,tree:n}};function nt(o,n){if(1&o&&(t.TgZ(0,"div",7),t._uU(1,"\n        "),t.YNc(2,tt,1,0,"ng-container",8),t._uU(3,"\n      "),t.qZA()),2&o){const e=t.oxw().$implicit,s=t.oxw(2),i=t.MAs(4);t.Q6J("ngStyle",t.HTZ(3,et,e.XPosition+"px",e.YPosition+"px",e.w+"px",e.h+"px",e.bc,e.c)),t.xp6(2),t.Q6J("ngTemplateOutlet",s.template?s.template:i)("ngTemplateOutletContext",t.WLB(10,it,e,s.tree))}}function st(o,n){if(1&o&&(t.O4$(),t.kcU(),t.ynx(0),t._uU(1,"\n      "),t.YNc(2,nt,4,13,"div",6),t._uU(3,"\n    "),t.BQk()),2&o){const e=n.$implicit;t.xp6(2),t.Q6J("ngIf",!e._isAncestorCollapsed()||!e._isAncestorCollapsed()&&e.isCollapsed)}}function ot(o,n){if(1&o&&(t.TgZ(0,"div",2),t._uU(1,"\n  "),t.TgZ(2,"div",3),t._uU(3,"\n    "),t.O4$(),t.TgZ(4,"svg",4),t._uU(5,"\n      "),t.YNc(6,K,2,2,"path",5),t._uU(7,"\n    "),t.qZA(),t._uU(8,"\n    "),t.YNc(9,st,4,1,"ng-container",5),t._uU(10,"\n  "),t.qZA(),t._uU(11,"\n"),t.qZA()),2&o){const e=t.oxw();t.xp6(4),t.Udp("width",e.tree.width+"px")("height",e.tree.height+"px"),t.xp6(2),t.Q6J("ngForOf",e.tree.nDatabaseNodes),t.xp6(3),t.Q6J("ngForOf",e.tree.nDatabaseNodes)}}function at(o,n){if(1&o&&(t._uU(0,"\n"),t._UZ(1,"i",9),t._uU(2)),2&o){const e=n.$implicit;t.xp6(1),t.Tol(e.iconClass),t.xp6(1),t.hij("\n",e.id,"\n")}}let rt=(()=>{class o{constructor(){this.toggleView=!0,this.tree=new y}set data(e){this.tree=new y,this.addNodes(this.tree,e),this.tree.UpdateTree()}update(){this.tree.UpdateTree()}get config(){return this.tree.config}addNodes(e,s,i=null){i=i||{id:-1,width:null,height:null,color:null,background:null,linkColor:null},s.width=s.width||i.width,s.height=s.height||i.height,s.color=s.color||i.color,s.background=s.background||i.background,s.linkColor=s.linkColor||i.linkColor,s.iconClass=s.iconClass||"fa fa-desktop",s.id=e.nDatabaseNodes.length,e.add(s.id,i.id,s.title,s.width,s.height,s.color,s.background,s.linkColor,s.data),s.children&&s.children.forEach(a=>{this.addNodes(e,a,s)})}refreshView(){this.toggleView=!1,setTimeout(()=>{this.toggleView=!0},1e3)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["tree-view"]],inputs:{template:"template",data:"data"},decls:6,vars:1,consts:[["class","tree",4,"ngIf"],["defaultTemplate",""],[1,"tree"],[1,"wrapper"],[1,"treeLink"],[4,"ngFor","ngForOf"],["class","item","style","overflow:visible !important",3,"ngStyle",4,"ngIf"],[1,"item",2,"overflow","visible !important",3,"ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["area-label","hidden"]],template:function(e,s){1&e&&(t._uU(0,"\n  "),t.YNc(1,ot,12,6,"div",0),t._uU(2,"\n"),t.YNc(3,at,3,4,"ng-template",null,1,t.W1O),t._uU(5,"\n  ")),2&e&&(t.xp6(1),t.Q6J("ngIf",s.tree.width&&s.tree.height&&s.toggleView))},directives:[C.O5,C.sg,C.PC,C.tP],styles:[".item[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background-color:#fff;position:absolute;overflow:hidden;box-shadow:0 .125rem .25rem #00000013;border-radius:5px}.tree[_ngcontent-%COMP%]{position:relative}.treeLink[_ngcontent-%COMP%]{stroke:red;fill:transparent}"]}),o})();var L=p(3265);function lt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-slider",18),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().graphZoom=i}),t._uU(1,"\n      "),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("ngModel",e.graphZoom)}}function ht(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-slider",19),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().graphZoomVal=i}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("ngModel",e.graphZoomVal)}}function ct(o,n){if(1&o&&(t._uU(0,"\n                            "),t.TgZ(1,"b"),t._uU(2),t.qZA(),t._uU(3,"\n                          ")),2&o){const e=t.oxw().$implicit;t.xp6(2),t.hij("",e.data.item.name," ")}}const D=function(o,n){return{"fa-3x":o,"fa-4x":n}};function pt(o,n){if(1&o&&t._UZ(0,"i",32),2&o){const e=t.oxw().$implicit,s=t.MAs(14);t.Tol(e.data.iconClass),t.Q6J("ngbTooltip",s)("ngClass",t.WLB(5,D,e.canCollapse,!e.canCollapse))}}function dt(o,n){if(1&o&&t._UZ(0,"i",33),2&o){const e=t.oxw().$implicit;t.Tol(e.data.iconClass),t.Q6J("ngClass",t.WLB(4,D,e.canCollapse,!e.canCollapse))}}function ut(o,n){if(1&o&&(t._uU(0,"\n                          "),t.TgZ(1,"p",34),t._uU(2,"\n                            "),t.TgZ(3,"span")(4,"b"),t._uU(5,"Name:"),t.qZA()(),t.TgZ(6,"span"),t._uU(7),t.qZA(),t._uU(8," "),t._UZ(9,"br"),t._uU(10,"\n                            "),t.TgZ(11,"span")(12,"b"),t._uU(13,"Source:"),t.qZA()(),t.TgZ(14,"span"),t._uU(15),t.qZA(),t._uU(16," "),t._UZ(17,"br"),t._uU(18,"\n                            "),t.TgZ(19,"span")(20,"b"),t._uU(21,"Destination:"),t.qZA()(),t.TgZ(22,"span"),t._uU(23),t.qZA(),t._uU(24," "),t._UZ(25,"br"),t._uU(26,"\n                            "),t.TgZ(27,"span")(28,"b"),t._uU(29,"Description:"),t.qZA()(),t.TgZ(30,"span"),t._uU(31),t.qZA(),t._uU(32," "),t._UZ(33,"br"),t._uU(34,"\n                            "),t.TgZ(35,"span")(36,"b"),t._uU(37,"Group:"),t.qZA()(),t.TgZ(38,"span"),t._uU(39),t.qZA(),t._uU(40,"\n                          "),t.qZA(),t._uU(41,"\n                        ")),2&o){const e=t.oxw().$implicit;t.xp6(7),t.Oqu(e.data.item.name),t.xp6(8),t.Oqu(e.data.item.source),t.xp6(8),t.Oqu(e.data.item.destination),t.xp6(8),t.Oqu(e.data.item.description),t.xp6(8),t.Oqu(e.data.item.group)}}function _t(o,n){if(1&o&&(t.TgZ(0,"td",35),t._uU(1,"\n                              \n                              "),t.TgZ(2,"span",36),t._uU(3,"\n                                "),t._UZ(4,"i",37),t._uU(5,"\n                              "),t.qZA(),t._uU(6," \n                              "),t._uU(7,"\n                            "),t.qZA()),2&o){t.oxw();const e=t.MAs(36);t.Q6J("ngbPopover",e)("autoClose","outside")}}function gt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td"),t._uU(1,"\n                              "),t.TgZ(2,"span",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(),a=i.tree,r=i.$implicit;return t.oxw().loadChildren(a,r)}),t._UZ(3,"i",39),t._uU(4," Load Child "),t.qZA(),t._uU(5,"\n                            "),t.qZA()}}function ft(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td"),t._uU(1,"\n                              "),t.TgZ(2,"span",40),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.tree.collapseNode(i.$implicit.id,!0)}),t._UZ(3,"i",41),t._uU(4," Collapse  "),t.qZA(),t._uU(5,"\n                            "),t.qZA()}}function mt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td"),t._uU(1,"\n                              "),t.TgZ(2,"span",40),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.tree.collapseNode(i.$implicit.id,!0)}),t._UZ(3,"i",39),t._uU(4," Expand "),t.qZA(),t._uU(5,"\n                            "),t.qZA()}}function Ct(o,n){if(1&o&&(t._uU(0,"\n    "),t.TgZ(1,"div",20),t._uU(2,"\n        "),t.TgZ(3,"div",21),t._uU(4,"\n            "),t.TgZ(5,"div",22),t._uU(6,"\n                "),t.TgZ(7,"table"),t._uU(8,"\n                    "),t.TgZ(9,"tr"),t._uU(10,"\n                        "),t.TgZ(11,"td",23),t._uU(12,"\n                          "),t.YNc(13,ct,4,1,"ng-template",null,24,t.W1O),t._uU(15,"\n                            "),t.YNc(16,pt,1,8,"i",25),t._uU(17,"\n                            "),t.YNc(18,dt,1,7,"i",26),t._uU(19,"\n                        "),t.qZA(),t._uU(20,"\n                        \n                    "),t.qZA(),t._uU(21,"\n                    "),t.TgZ(22,"tr"),t._uU(23,"\n                      "),t.TgZ(24,"td",23),t._uU(25,"\n                        "),t.TgZ(26,"b"),t._uU(27),t.qZA(),t._uU(28,"\n                      "),t.qZA(),t._uU(29,"\n                    "),t.qZA(),t._uU(30,"\n                    "),t.TgZ(31,"tr"),t._uU(32,"\n                      "),t.TgZ(33,"td",23),t._uU(34,"\n                        "),t.YNc(35,ut,42,5,"ng-template",null,27,t.W1O),t._uU(37,"\n                        "),t.TgZ(38,"table",28),t._uU(39,"\n                          "),t.TgZ(40,"tr"),t._uU(41,"\n                            "),t.YNc(42,_t,8,2,"td",29),t._uU(43,"\n                            "),t.YNc(44,gt,6,0,"td",30),t._uU(45,"\n                            "),t.YNc(46,ft,6,0,"td",30),t._uU(47,"\n                            "),t.YNc(48,mt,6,0,"td",31),t._uU(49,"\n                          "),t.qZA(),t._uU(50,"\n                        "),t.qZA(),t._uU(51,"\n                        \n                        \n                      "),t.qZA(),t._uU(52,"\n                    "),t.qZA(),t._uU(53,"\n                "),t.qZA(),t._uU(54,"\n            "),t.qZA(),t._uU(55,"\n          "),t.qZA(),t._uU(56,"\n        \n    "),t.qZA(),t._uU(57,"\n  ")),2&o){const e=n.$implicit;t.xp6(16),t.Q6J("ngIf",!e.data.isRoot),t.xp6(2),t.Q6J("ngIf",e.data.isRoot),t.xp6(9),t.Oqu(e.data.id),t.xp6(15),t.Q6J("ngIf",!e.data.isRoot),t.xp6(2),t.Q6J("ngIf",!e.canCollapse&&!e.isEmpty),t.xp6(2),t.Q6J("ngIf",e.canCollapse&&!e.isCollapsed),t.xp6(2),t.Q6J("ngIf",e.canCollapse&&e.isCollapsed)}}const vt=function(o,n,e){return{zoom:o,transform:n,"transform-origin":e}};let Tt=(()=>{class o{constructor(e,s,i,a,r,l,d,c){this.vms=e,this.spinner=s,this.formBuilder=i,this.dialog=a,this.router=r,this._auth=l,this.toastService=d,this._client=c,this.Orientation=h,this.graphZoom=1,this.graphZoomVal=100,console.log("constructor called"),this.loggedUser=l.getUser(),this.browser=c.deviceBrowser()}ngOnInit(){console.log("ngOninit called"),void 0!==history.state.relationships?(this.relationships=history.state.relationships,this.ip=history.state.ip,this.initChart()):void 0===history.state.relationships&&void 0!==history.state.ip?(this.ip=history.state.ip,this.spinner.setSpinnerState(!0),this.vms.getRelatedVMSData(history.state.ip).then(e=>{e=JSON.parse(e),this.spinner.setSpinnerState(!1),"FAILED"==e.status&&"No record found!"==e.message?(console.log("No record found"),this.loggedUser.useToast?(this.toastService.showDanger("No record found! Please add relationships on Action > Relationships ",5e3),this.router.navigate(["../portal/home/"])):this.openDialog({type:"message",message:"No record found! Please add relationships on Action > Relationships "},()=>{this.router.navigate(["../portal/home/"])})):(e=Object.keys(e).map(function(s){return e[s]})).length>0&&(this.relationships=e,this.initChart())}).catch(e=>{this.spinner.setSpinnerState(!1),this.openDialog({type:"message",message:e.toString()},()=>{this.router.navigate(["../portal/home/"])})})):(this.spinner.setSpinnerState(!0),this.vms.getVms().then(e=>{this.getData(e),this.spinner.setSpinnerState(!1)}).catch(e=>{this.spinner.setSpinnerState(!1),this.openDialog({type:"message",message:e.toString()},()=>{this.router.navigate(["../portal/home/"])})}),this.spinner.setSpinnerState(!1))}initChart(){console.log(this.relationships),this.spinner.setSpinnerState(!0),this.parseRelationships(),this.spinner.setSpinnerState(!1)}parseRelationships(){this.data={data:{isRoot:!0,id:this.ip,iconClass:"fa fa-desktop"},linkColor:"#888",background:"#fff",color:"#000",width:140,height:140,children:[]};for(var e=[],s=0;s<this.relationships.length;s++){var i=this.relationships[s];i.childRelationship||e.push({data:{item:i,id:i.destination,iconClass:i.icon},linkColor:"#888",background:"#fff",color:"#000",width:140,height:140})}this.data.children=e}getData(e){this.openDialogInput({title:"Choose a virtual machine",label:"VM IP",placeholder:"Select VM",list:e,bindLabel:"ip",closeCallback:()=>{this.router.navigate(["/portal/home/vmm/dash"])}},s=>{this.ip=(s=s.dataCtrl).ip,this.spinner.setSpinnerState(!0),this.vms.getRelatedVMSData(s.ip).then(i=>{i=JSON.parse(i),this.spinner.setSpinnerState(!1),"FAILED"==i.status&&"No record found!"==i.message?(console.log("No record found"),this.openDialog({type:"message",message:"No record found! Please add relationships on Action > Relationships "},()=>{this.router.navigate(["../portal/home/"])})):(i=Object.keys(i).map(function(a){return i[a]})).length>0&&(this.relationships=i,this.initChart())}).catch(i=>{this.spinner.setSpinnerState(!1),this.openDialog({type:"message",message:i.toString()},()=>{this.router.navigate(["../portal/home/"])})})})}openDialogInput(e,s){this.dialog.open(G.k,{data:e,panelClass:"app-dialog-class",width:"500px"}).afterClosed().toPromise().then(i=>{"function"==typeof s&&""!=i&&null!=i&&s(i)})}openDialog(e,s){this.dialog.open(H.h,{data:e,panelClass:"app-dialog-class"}).afterClosed().toPromise().then(i=>{"function"==typeof s&&s(i)})}filterListForChildRelationship(e){var s=[];for(var i in e)e[i].childRelationship||s.push(e[i]);return console.log("After filter",s),s}loadChildren(e,s){console.log("called",e,s),this.spinner.setSpinnerState(!0),this.vms.getRelatedVMSData(s.data.id).then(i=>{if(i=JSON.parse(i),this.spinner.setSpinnerState(!1),"FAILED"==i.status&&"No record found!"==i.message)s.isEmpty=!0,console.log("No record found"),this.openDialog({type:"message",message:"No record found! Please add relationships on VM List > Action > Related VMs list"},null);else if((i=Object.keys(i).map(function(d){return i[d]})).length>0){if(0==(i=this.filterListForChildRelationship(i)).length)return s.isEmpty=!0,void(this.loggedUser.useToast?this.toastService.showDanger("No record found! Please add relationships on VM List > Action > relationships  ",5e3):this.openDialog({type:"message",message:"No record found! Please add relationships on VM List > Action > relationships  "},null));for(var a=0;a<i.length;a++){var r=i[a];if(!r.childRelationship){var l={data:{item:r,id:r.destination,iconClass:r.icon},linkColor:"#888",background:"#fff",color:"#000",width:140,height:140,id:0,iconClass:""};l.id=e.nDatabaseNodes.length,l.iconClass=s.iconClass||"fa fa-desktop",e.add(l.id,s.id,"",l.width,l.height,l.color,l.background,l.linkColor,l.data)}}e.UpdateTree()}}).catch(i=>{this.spinner.setSpinnerState(!1),this.openDialog({type:"message",message:i.toString()},null)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(V._),t.Y36(I.V),t.Y36(f.qu),t.Y36(X.uw),t.Y36(O.F0),t.Y36(z.q),t.Y36(W.k),t.Y36($.l))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-related-vms-graph-chart"]],decls:72,vars:15,consts:[[1,"row","p-2"],[1,"col"],["for","linktype"],["id","linktype",3,"ngModel","ngModelChange"],["value","M"],["value","L"],["value","B"],["for","orientation"],["id","orientation",3,"ngModel","ngModelChange"],[3,"ngValue"],["id","sliderlabel","for","sliderzoom"],["id","sliderzoom","max","5","min","0","step","0.01","thumbLabel","'Zoom(%)'","aria-labelledby","sliderlabel",3,"ngModel","ngModelChange",4,"ngIf"],["id","sliderzoom","max","300","min","0","step","1","thumbLabel","'Zoom(%)'","aria-labelledby","sliderlabel",3,"ngModel","ngModelChange",4,"ngIf"],[1,"graph-bg","d-flex","justify-content-center","mt-1","p-3",2,"overflow","auto !important","width","auto !important","height","100% !important"],[1,"d-flex","justify-content-center"],[3,"ngStyle","data","template"],["treeView",""],["treeTemplate",""],["id","sliderzoom","max","5","min","0","step","0.01","thumbLabel","'Zoom(%)'","aria-labelledby","sliderlabel",3,"ngModel","ngModelChange"],["id","sliderzoom","max","300","min","0","step","1","thumbLabel","'Zoom(%)'","aria-labelledby","sliderlabel",3,"ngModel","ngModelChange"],[1,"container","card","h-100","w-100","alert-custom","node-container","graph-node"],[1,"h-100","d-flex","justify-content-center","align-items-center"],[1,"justify-content-center","align-items-center"],[1,"text-center"],["tipContent",""],[3,"ngbTooltip","class","ngClass",4,"ngIf"],[3,"class","ngClass",4,"ngIf"],["nodePopOver",""],[1,"w-100"],["placement","bottom",3,"ngbPopover","autoClose",4,"ngIf"],[4,"ngIf"],[4,"ngIfGraph-btn-expand","ngIf"],[3,"ngbTooltip","ngClass"],[3,"ngClass"],[1,"p"],["placement","bottom",3,"ngbPopover","autoClose"],[1,"bold","btn","btn-primary","load-child","graph-btn-info"],[1,"fa","fa-info-circle"],[1,"bold","btn","btn-primary","load-child","graph-btn-load-child",3,"click"],[1,"fa","fa-plus-circle"],[1,"bold","btn","btn-primary","graph-btn",3,"click"],[1,"fa","fa-minus-circle"]],template:function(e,s){if(1&e){const i=t.EpF();t._uU(0,"\n"),t._uU(1,"\n"),t._UZ(2,"app-path"),t._uU(3,"\n"),t._uU(4,"\n"),t.TgZ(5,"div",0),t._uU(6,"\n    "),t.TgZ(7,"div",1),t._uU(8,"\n        "),t.TgZ(9,"label",2),t._uU(10,"Link type "),t.qZA(),t._uU(11,"\n        "),t.TgZ(12,"select",3),t.NdJ("ngModelChange",function(r){return t.CHM(i),t.MAs(62).config.linkType=r}),t._uU(13,"\n          "),t.TgZ(14,"option",4),t._uU(15,"Cross"),t.qZA(),t._uU(16,"\n          "),t.TgZ(17,"option",5),t._uU(18,"Lines"),t.qZA(),t._uU(19,"\n          "),t.TgZ(20,"option",6),t._uU(21,"Blaizer"),t.qZA(),t._uU(22,"\n        "),t.qZA(),t._uU(23,"\n      "),t.qZA(),t._uU(24,"  \n      "),t.TgZ(25,"div",1),t._uU(26,"\n       "),t.TgZ(27,"label",7),t._uU(28," Orientation "),t.qZA(),t._uU(29,"\n        "),t.TgZ(30,"select",8),t.NdJ("ngModelChange",function(r){t.CHM(i);const l=t.MAs(62);return l.config.iRootOrientation=r,l.update()}),t._uU(31,"\n          "),t.TgZ(32,"option",9),t._uU(33,"Top"),t.qZA(),t._uU(34,"\n          "),t.TgZ(35,"option",9),t._uU(36,"Bottom"),t.qZA(),t._uU(37,"\n          "),t.TgZ(38,"option",9),t._uU(39,"Rigth"),t.qZA(),t._uU(40,"\n          "),t.TgZ(41,"option",9),t._uU(42,"Left"),t.qZA(),t._uU(43,"\n        "),t.qZA(),t._uU(44,"\n      "),t.qZA(),t._uU(45,"\n      "),t.TgZ(46,"div",1),t._uU(47,"\n        "),t.TgZ(48,"label",10),t._uU(49,"Graph Zoom"),t.qZA(),t._uU(50,"\n        "),t.YNc(51,lt,2,1,"mat-slider",11),t._uU(52,"\n      \n      "),t.YNc(53,ht,1,1,"mat-slider",12),t._uU(54,"\n    "),t.qZA(),t._uU(55,"\n"),t.qZA(),t._uU(56,"\n\n  \n \n  "),t.TgZ(57,"div",13),t._uU(58,"\n  "),t.TgZ(59,"div",14),t._uU(60,"\n    \n    "),t.TgZ(61,"tree-view",15,16),t._uU(63," \n    "),t.qZA(),t._uU(64,"\n "),t.qZA(),t._uU(65,"\n "),t._UZ(66,"br"),t._uU(67,"   \n \n"),t.qZA(),t._uU(68,"\n  "),t.YNc(69,Ct,58,7,"ng-template",null,17,t.W1O),t._uU(71,"\n  ")}if(2&e){const i=t.MAs(62),a=t.MAs(70);t.xp6(12),t.Q6J("ngModel",i.config.linkType),t.xp6(18),t.Q6J("ngModel",i.config.iRootOrientation),t.xp6(2),t.Q6J("ngValue",s.Orientation.RO_TOP),t.xp6(3),t.Q6J("ngValue",s.Orientation.RO_BOTTOM),t.xp6(3),t.Q6J("ngValue",s.Orientation.RO_RIGHT),t.xp6(3),t.Q6J("ngValue",s.Orientation.RO_LEFT),t.xp6(10),t.Q6J("ngIf","chrome"!=s.browser.toLowerCase()),t.xp6(2),t.Q6J("ngIf","chrome"==s.browser.toLowerCase()),t.xp6(8),t.Q6J("ngStyle",t.kEZ(11,vt,"chrome"==s.browser.toLowerCase()?s.graphZoomVal+"%":"NA","chrome"!=s.browser.toLowerCase()?"scale("+s.graphZoom+","+s.graphZoom+")":"NA","chrome"!=s.browser.toLowerCase()?"top":"NA"))("data",s.data)("template",a)}},directives:[J.l,f.EJ,f.JJ,f.On,f.YN,f.Kr,C.O5,j.pH,rt,C.PC,L._L,C.mk,L.o8],styles:["#pie-chart-parent[_ngcontent-%COMP%], .chart[_ngcontent-%COMP%]{display:grid}.graph-bg[_ngcontent-%COMP%]{background-color:#fff;background-size:100% 1.2em;background-image:linear-gradient(0deg,transparent 79px,#abced4 79px,#abced4 81px,transparent 81px),linear-gradient(#eee .05em,transparent .05em);-pie-background:linear-gradient(0deg,transparent 79px,#abced4 79px,#abced4 81px,transparent 81px) 0 0/100% 1.2em,linear-gradient(#eee .05em,transparent .05em) 0 0/100% 1.2em #fff;behavior:url(/PIE.htc)}.load-child[_ngcontent-%COMP%]{display:none}.node-container[_ngcontent-%COMP%]:hover   .load-child[_ngcontent-%COMP%]{display:block}.card[_ngcontent-%COMP%]{border-radius:4px;background:#fff;box-shadow:0 6px 10px #00000014,0 0 6px #0000000d;transition:.3s transform cubic-bezier(.155,1.105,.295,1.12),.3s box-shadow;cursor:pointer}.card[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 10px 20px #0000001f,0 4px 8px #0000000f}.card-notify-badge-danger[_ngcontent-%COMP%]{background:#f85f18!important}",".center-block[_ngcontent-%COMP%] {\n        margin-left: auto;\n        margin-right: auto;\n        display: block;\n    }\n    \n    .link[_ngcontent-%COMP%] {\n        cursor: pointer;\n    }\n    \n    .only-verical-scroller[_ngcontent-%COMP%] {\n        overflow-y: scroll;\n        overflow-x: hidden !important;\n    }\n    \n    .no-scroller[_ngcontent-%COMP%] {\n        overflow-y: hidden !important;\n        overflow-x: hidden !important;\n    }"]}),o})();var xt=p(9722),bt=p(6201),q=p(9013),Ut=p(6156),At=p(1377);const Zt=["dataContainer"];function Ot(o,n){if(1&o&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.s9C("value",e),t.xp6(1),t.Oqu(e)}}function St(o,n){1&o&&(t.TgZ(0,"div",24),t._uU(1,"Field is required"),t.qZA())}function Nt(o,n){if(1&o&&(t.TgZ(0,"div",22),t._uU(1,"\n                            "),t.YNc(2,St,2,0,"div",23),t._uU(3,"\n                        "),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("ngIf",e.f.field.errors.required)}}function wt(o,n){1&o&&(t.TgZ(0,"div",24),t._uU(1,"Height is required"),t.qZA())}function Lt(o,n){if(1&o&&(t.TgZ(0,"div",22),t._uU(1,"\n                            "),t.YNc(2,wt,2,0,"div",23),t._uU(3,"\n                        "),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("ngIf",e.f.height.errors.required)}}const S=function(o){return{activated:o}};function Mt(o,n){if(1&o&&t._UZ(0,"i",29),2&o){const e=t.oxw().$implicit,s=t.oxw(2);t.Q6J("matTooltip",e)("ngClass",t.VKq(2,S,s.f.chartType.value==e))}}function Pt(o,n){if(1&o&&t._UZ(0,"i",30),2&o){const e=t.oxw().$implicit,s=t.oxw(2);t.Q6J("ngClass",t.VKq(2,S,s.f.chartType.value==e))("matTooltip",e)}}function Rt(o,n){if(1&o&&t._UZ(0,"i",31),2&o){const e=t.oxw().$implicit,s=t.oxw(2);t.Q6J("ngClass",t.VKq(2,S,s.f.chartType.value==e))("matTooltip",e)}}function yt(o,n){if(1&o&&t._UZ(0,"i",32),2&o){const e=t.oxw().$implicit,s=t.oxw(2);t.Q6J("ngClass",t.VKq(2,S,s.f.chartType.value==e))("matTooltip",e)}}function Vt(o,n){if(1&o&&(t.TgZ(0,"mat-button-toggle",21),t.YNc(1,Mt,1,4,"i",25),t._uU(2,"\n                                "),t.YNc(3,Pt,1,4,"i",26),t._uU(4,"\n                                "),t.YNc(5,Rt,1,4,"i",27),t._uU(6,"\n                                "),t.YNc(7,yt,1,4,"i",28),t._uU(8,"\n                            "),t.qZA()),2&o){const e=n.$implicit;t.s9C("value",e),t.xp6(1),t.Q6J("ngIf","PIE CHART"==e),t.xp6(2),t.Q6J("ngIf","BAR VERTICAL"==e),t.xp6(2),t.Q6J("ngIf","BAR HORIZONTAL"==e),t.xp6(2),t.Q6J("ngIf","ADVANCED"==e)}}const Z=function(o){return{"height.px":o}};function It(o,n){if(1&o&&(t.TgZ(0,"div",33),t._uU(1,"\n        "),t.TgZ(2,"ngx-charts-pie-grid",34),t._uU(3,"\n        "),t.qZA(),t._uU(4,"\n    "),t.qZA()),2&o){const e=t.oxw(2);t.Q6J("ngStyle",t.VKq(2,Z,e.cardHeight)),t.xp6(2),t.Q6J("results",e.resultSet)}}function Jt(o,n){if(1&o&&(t.TgZ(0,"div",35),t._uU(1,"\n        "),t.TgZ(2,"ngx-charts-bar-horizontal",36),t._uU(3,"\n        "),t.qZA(),t._uU(4,"\n    "),t.qZA()),2&o){const e=t.oxw(2);t.Q6J("ngStyle",t.VKq(9,Z,e.cardHeight)),t.xp6(2),t.Q6J("results",e.resultSet)("xAxis",e.showXAxis)("yAxis",e.showYAxis)("legend",!1)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel","Count")("yAxisLabel",e.f.field.value)}}function Dt(o,n){if(1&o&&(t.TgZ(0,"div",35),t._uU(1,"\n        "),t.TgZ(2,"ngx-charts-bar-vertical",37),t._uU(3,"\n        "),t.qZA(),t._uU(4,"\n    "),t.qZA()),2&o){const e=t.oxw(2);t.Q6J("ngStyle",t.VKq(9,Z,e.cardHeight)),t.xp6(2),t.Q6J("results",e.resultSet)("xAxis",e.showXAxis)("yAxis",e.showYAxis)("legend",!1)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("yAxisLabel","Count")("xAxisLabel",e.f.field.value)}}function qt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",35),t._uU(1,"\n        "),t.TgZ(2,"ngx-charts-advanced-pie-chart",38),t.NdJ("select",function(i){return t.CHM(e),t.oxw(2).onSelect(i)})("activate",function(i){return t.CHM(e),t.oxw(2).onActivate(i)})("deactivate",function(i){return t.CHM(e),t.oxw(2).onDeactivate(i)}),t._uU(3,"\n        "),t.qZA(),t._uU(4,"\n    "),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("ngStyle",t.VKq(3,Z,e.cardHeight)),t.xp6(2),t.Q6J("results",e.resultSet)("gradient",e.gradient)}}function kt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",35),t._uU(1," \n        "),t.TgZ(2,"ngx-charts-pie-chart",39),t.NdJ("select",function(i){return t.CHM(e),t.oxw(2).onSelect(i)})("activate",function(i){return t.CHM(e),t.oxw(2).onActivate(i)})("deactivate",function(i){return t.CHM(e),t.oxw(2).onDeactivate(i)}),t._uU(3,"\n        "),t.qZA(),t._uU(4,"\n    "),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("ngStyle",t.VKq(3,Z,e.cardHeight)),t.xp6(2),t.Q6J("results",e.resultSet)("gradient",e.gradient)}}const M=function(o){return{"is-invalid":o}};function Et(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",1),t._uU(1,"\n    "),t.TgZ(2,"ngb-alert",2),t._uU(3,"\n        "),t.TgZ(4,"form",3),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().onSubmit()}),t._uU(5,"\n            "),t.TgZ(6,"div",4),t._uU(7,"\n                "),t.TgZ(8,"div",5),t._uU(9,"\n                    "),t.TgZ(10,"div",6),t._uU(11,"\n                        "),t.TgZ(12,"label",7),t._uU(13,"Field:"),t.qZA(),t._uU(14,"\n                        "),t.TgZ(15,"mat-select",8),t._uU(16,"\n                            "),t.YNc(17,Ot,2,2,"mat-option",9),t._uU(18,"\n                        "),t.qZA(),t._uU(19,"\n                        "),t.YNc(20,Nt,4,1,"div",10),t._uU(21,"\n                    "),t.qZA(),t._uU(22,"\n                "),t.qZA(),t._uU(23,"\n                \n                "),t.TgZ(24,"div",5),t._uU(25,"\n                    "),t.TgZ(26,"div",6),t._uU(27,"\n                        "),t.TgZ(28,"label",11),t._uU(29,"Chart Height:"),t.qZA(),t._UZ(30,"br"),t._uU(31,"\n                        "),t._UZ(32,"input",12),t._uU(33,"\n                        "),t.YNc(34,Lt,4,1,"div",10),t._uU(35,"\n                    "),t.qZA(),t._uU(36,"\n                "),t.qZA(),t._uU(37,"\n                "),t.TgZ(38,"div",5),t._uU(39,"\n                    "),t.TgZ(40,"div",6),t._uU(41,"\n                        "),t.TgZ(42,"label",7),t._uU(43,"Chart Type:"),t.qZA(),t._uU(44,"        \n                        "),t.TgZ(45,"mat-button-toggle-group",13),t._uU(46,"\n                            "),t.YNc(47,Vt,9,5,"mat-button-toggle",9),t._uU(48,"\n                        "),t.qZA(),t._uU(49,"\n                        "),t.qZA(),t._uU(50,"\n                "),t.qZA(),t._uU(51,"\n                "),t.TgZ(52,"div",14),t._uU(53,"\n                    "),t.TgZ(54,"div",15),t._uU(55,"\n                        "),t.TgZ(56,"label",16),t._uU(57," \xa0 "),t.qZA(),t._uU(58,"\n                        "),t.TgZ(59,"button",17),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSubmit}),t._uU(60,"Submit"),t.qZA(),t._uU(61,"\n                    "),t.qZA(),t._uU(62,"\n                "),t.qZA(),t._uU(63,"\n            "),t.qZA(),t._uU(64,"\n            \n        "),t.qZA(),t._uU(65,"\n    "),t.qZA(),t._uU(66,"\n  \n    "),t.TgZ(67,"div",18),t._uU(68,"\n    "),t.YNc(69,It,5,4,"div",19),t._uU(70,"\n    "),t.YNc(71,Jt,5,11,"div",20),t._uU(72,"\n    "),t.YNc(73,Dt,5,11,"div",20),t._uU(74,"\n    "),t.YNc(75,qt,5,5,"div",20),t._uU(76,"\n    "),t.YNc(77,kt,5,5,"div",20),t._uU(78,"\n"),t.qZA(),t._uU(79,"\n "),t.qZA()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("dismissible",!1),t.xp6(2),t.Q6J("formGroup",e.registerForm),t.xp6(11),t.Q6J("ngClass",t.VKq(14,M,e.submitted&&e.f.field.errors)),t.xp6(2),t.Q6J("ngForOf",e.fieldList),t.xp6(3),t.Q6J("ngIf",e.submitted&&e.f.field.errors),t.xp6(12),t.Q6J("ngClass",t.VKq(16,M,e.submitted&&e.f.height.errors)),t.xp6(2),t.Q6J("ngIf",e.submitted&&e.f.height.errors),t.xp6(11),t.Q6J("ngClass",t.VKq(18,M,e.submitted&&e.f.chartType.errors)),t.xp6(2),t.Q6J("ngForOf",e.chartTypeList),t.xp6(22),t.Q6J("ngIf",e.showPie),t.xp6(2),t.Q6J("ngIf",e.showBar),t.xp6(2),t.Q6J("ngIf",e.showBarVer),t.xp6(2),t.Q6J("ngIf",e.showAdv),t.xp6(2),t.Q6J("ngIf",e.showPieC)}}const Ft=[{path:"",component:Q,children:[{path:"dash",component:(()=>{class o{constructor(e,s,i){this.vms=e,this.spinner=s,this.formBuilder=i,this.showPie=!1,this.showBar=!1,this.showAdv=!1,this.showBarVer=!1,this.showPieC=!1,this.vmList=[],this.vmDataOS=[],this.vmDataSnapCount=[],this.vmDataGroup=[],this.vmDataAvailibility=[],this.resultSet=[],this.vmDataLoading=!1,this.view=[600,400],this.fieldList=["OS","VERSION","RAM","GROUP","STATUS","ASSIGNEE","OWNER"],this.chartTypeList=["PIE CHART","BAR VERTICAL","BAR HORIZONTAL","ADVANCED"],this.showChart=!1,this.showXAxis=!0,this.showYAxis=!0,this.gradient=!1,this.showLegend=!0,this.showXAxisLabel=!0,this.xAxisLabel="Group",this.showYAxisLabel=!0,this.yAxisLabel="Count",this.timeline=!0,this.colorScheme={domain:["#9370DB","#87CEFA","#FA8072","#FF7F50","#90EE90","#9370DB"]},this.showLabels=!0,this.spinner.setSpinnerState(!0),this.vmDataLoading=!0,this.vms.getVms().then(r=>{this.spinner.setSpinnerState(!1),this.vmList=r,this.parseVMListOnOSBasis(),this.parseVMListOnSnapCountBasis(),this.parseVMListOnGroupBasis(),this.parseVMListOnAvailibilitypBasis(),this.vmDataLoading=!1}).catch(r=>{this.spinner.setSpinnerState(!1),this.vmDataLoading=!1})}get f(){return this.registerForm.controls}getParseData(e){var i,a,s=[];"OS"==e&&(a=this.groupBy(this.vmList,r=>r.os),i=[...new Set(this.vmList.map(r=>r.os))]),"GROUP"==e&&(a=this.groupBy(this.vmList,r=>r.group),i=[...new Set(this.vmList.map(r=>r.group))]),"STATUS"==e&&(a=this.groupBy(this.vmList,r=>r.status),i=[...new Set(this.vmList.map(r=>r.status))]),"ASSIGNEE"==e&&(a=this.groupBy(this.vmList,r=>r.owner),i=[...new Set(this.vmList.map(r=>r.owner))]),"OWNER"==e&&(a=this.groupBy(this.vmList,r=>r.vm_owner_lab),i=[...new Set(this.vmList.map(r=>r.vm_owner_lab))]),"RAM"==e&&(a=this.groupBy(this.vmList,r=>r.ram),i=[...new Set(this.vmList.map(r=>r.ram))]),"VERSION"==e&&(a=this.groupBy(this.vmList,r=>r.ver),i=[...new Set(this.vmList.map(r=>r.ver))]),"SNAPSHOT COUNT"==e&&(a=this.groupBy(this.vmList,r=>r.snap_count),i=[...new Set(this.vmList.map(r=>r.snap_count))]),i.forEach(r=>{if(void 0!==r){var l=a.get(r);s.push({name:r+"",value:l.length})}}),this.resultSet=s}toggleChart(e){console.log("toggleChart :: ",e),"BAR HORIZONTAL"==e?(this.showBar=!0,this.showAdv=!1,this.showPie=!1,this.showBarVer=!1,this.showPieC=!1):"PIE CHART"==e?(this.showBar=!1,this.showAdv=!1,this.showPie=!1,this.showPieC=!0,this.showBarVer=!1):"PIE GRID"==e?(this.showBar=!1,this.showAdv=!1,this.showPie=!0,this.showBarVer=!1,this.showPieC=!1):"ADVANCED"==e?(this.showBar=!1,this.showAdv=!0,this.showPie=!1,this.showBarVer=!1,this.showPieC=!1):(e="BAR VERTICAL")&&(this.showBar=!1,this.showAdv=!1,this.showPie=!1,this.showBarVer=!0,this.showPieC=!1)}onSubmit(){this.toggleChart(this.registerForm.value.chartType),this.getParseData(this.registerForm.value.field),this.cardHeight=this.registerForm.value.height,this.showChart=!0}ngOnInit(){this.registerForm=this.formBuilder.group({field:["OS",f.kI.required],chartType:["PIE CHART",f.kI.required],height:[300,f.kI.required]})}parseVMListOnAvailibilitypBasis(){const e=this.groupBy(this.vmList,i=>i.status);[...new Set(this.vmList.map(i=>i.status))].forEach(i=>{if(void 0!==i){var a=e.get(i);this.vmDataAvailibility.push({name:i+"",value:a.length})}})}parseVMListOnGroupBasis(){const e=this.groupBy(this.vmList,i=>i.group);[...new Set(this.vmList.map(i=>i.group))].forEach(i=>{var a=e.get(i);this.vmDataGroup.push({name:i+"",value:a.length})})}parseVMListOnSnapCountBasis(){const e=this.groupBy(this.vmList,i=>i.snap_count);[...new Set(this.vmList.map(i=>i.snap_count))].forEach(i=>{var a=e.get(i);this.vmDataSnapCount.push({name:i+"",value:a.length})})}parseVMListOnOSBasis(){const e=this.groupBy(this.vmList,i=>i.os);[...new Set(this.vmList.map(i=>i.os))].forEach(i=>{var a=e.get(i);this.vmDataOS.push({name:i+"",value:a.length})})}groupBy(e,s){const i=new Map;return e.forEach(a=>{const r=s(a),l=i.get(r);l?l.push(a):i.set(r,[a])}),i}onSelect(e){}onActivate(e){}onDeactivate(e){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(V._),t.Y36(I.V),t.Y36(f.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-vm-chart"]],viewQuery:function(e,s){if(1&e&&t.Gf(Zt,5),2&e){let i;t.iGM(i=t.CRH())&&(s.dataContainer=i.first)}},decls:4,vars:1,consts:[["class","container-fluid mt-3  no-scroller",4,"ngIf"],[1,"container-fluid","mt-3","no-scroller"],["id","chart-option-sections","type","warning",3,"dismissible"],[3,"formGroup","ngSubmit"],[1,"row","w-100"],[1,"col-sm-2"],[1,"form-group","required"],["for","field"],["id","field","formControlName","field",1,"form-control",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["for","height"],["id","height","type","text","formControlName","height",1,"form-control",3,"ngClass"],["id","chartType","height","20","formControlName","chartType",3,"ngClass"],[1,"col-sm-2","ml-5"],[1,"form-group"],["for","button"],["mat-stroked-button","","name","button","type","submit",1,"btn","form-control","float-sm-right","text-capitalize",2,"background-color","white",3,"click"],[1,"p-4"],["id","pie-chart-parent",3,"ngStyle",4,"ngIf"],["class","chart",3,"ngStyle",4,"ngIf"],[3,"value"],[1,"invalid-feedback"],["class","ml-1",4,"ngIf"],[1,"ml-1"],["class","fa fa-pie-chart",3,"matTooltip","ngClass",4,"ngIf"],["class","fa fa-bar-chart-o",3,"ngClass","matTooltip",4,"ngIf"],["class","fa fa-bar-chart rotate90",3,"ngClass","matTooltip",4,"ngIf"],["class","fa fa-area-chart",3,"ngClass","matTooltip",4,"ngIf"],[1,"fa","fa-pie-chart",3,"matTooltip","ngClass"],[1,"fa","fa-bar-chart-o",3,"ngClass","matTooltip"],[1,"fa","fa-bar-chart","rotate90",3,"ngClass","matTooltip"],[1,"fa","fa-area-chart",3,"ngClass","matTooltip"],["id","pie-chart-parent",3,"ngStyle"],[3,"view","results"],[1,"chart",3,"ngStyle"],[3,"results","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel"],[3,"results","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","yAxisLabel","xAxisLabel"],[3,"results","gradient","select","activate","deactivate"],["labels","true","maxLabelLength","100","legends","true","trimLabels","false",3,"results","gradient","select","activate","deactivate"]],template:function(e,s){1&e&&(t._UZ(0,"app-path"),t._uU(1,"\n"),t._uU(2,"\n"),t.YNc(3,Et,80,20,"div",0)),2&e&&(t.xp6(3),t.Q6J("ngIf",!s.vmDataLoading))},directives:[J.l,C.O5,L.xm,f._Y,f.JL,f.sg,xt.gD,f.JJ,f.u,C.mk,C.sg,bt.ey,f.Fj,q.A9,q.Yi,Ut.gM,At.lW,C.PC,b.Nm,b.$e,b.K$,b.MP,b.JU],styles:["#pie-chart-parent[_ngcontent-%COMP%], .chart[_ngcontent-%COMP%]{display:grid}.mat-button-toggle-group[_ngcontent-%COMP%]{height:calc(1.5em + .75rem + 2px)}",".center-block[_ngcontent-%COMP%] {\n        margin-left: auto;\n        margin-right: auto;\n        display: block;\n    }\n    \n    .link[_ngcontent-%COMP%] {\n        cursor: pointer;\n    }\n    \n    .only-verical-scroller[_ngcontent-%COMP%] {\n        overflow-y: scroll;\n        overflow-x: hidden !important;\n    }\n    \n    .no-scroller[_ngcontent-%COMP%] {\n        overflow-y: hidden !important;\n        overflow-x: hidden !important;\n    }"]}),o})(),data:{animation:"admin",title:"Charts"}},{path:"relationships",component:Tt,data:{animation:"chart",title:"Relationships"}},{path:"",redirectTo:"dash",pathMatch:"full"},{path:"**",component:p(960).R,data:{animation:"notFound",title:"404-Page Not Found!"}}]}];let Qt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[O.Bz.forChild(Ft)],O.Bz]}),o})();var Ht=p(520),Gt=p(6140);let Xt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[C.ez,f.UX,f.u5,Ht.JF,E.q,Qt,Y.u,b.NA,b.pT,Gt.x]]}),o})()}}]);